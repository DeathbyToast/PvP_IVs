<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TDF58VB');</script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <link rel="canonical" href="https://pvpivs.com/searchStr.html" />
    <!-- Include pre-loads to reduce/optimize page load time-->
    <link rel="preload" href="https://pvpivs.com/includes/style.css" as="style">
    <link rel="preload" href="https://pvpivs.com/includes/darkLightThemes.js" as="script">
    <link rel="preload" href="https://pvpivs.com/includes/collapsible.js" as="script">
    <link rel="preload" href="https://pvpivs.com/includes/calculate.js" as="script">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.css" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.js" as="script">
    <link rel="preload" href="https://pvpivs.com/includes/pokeListObj.js" as="script">
    <title>PvP IVs - Search Strings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Pok&eacute;mon Go&trade; PvP IVs search string generator finds your best PvP IVs and/or helps you send the rest to Professor Willow. Now able to search for / exclude 0% IVs!"/>
    <link rel="icon" 
      type="image/png" 
      href="https://pvpivs.com/includes/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.css">
    <link rel="stylesheet" href="https://pvpivs.com/includes/style.css">
    <style>
    .evoLimits{
      display:none;
    }
    input[type=number]{
      width: 42px;
    }
    </style>
    <!-- Begin Playwire Head -->
    <script>window.ramp=window.ramp ||{}; window.ramp.que=window.ramp.que || []; </script> <script async src="//cdn.intergient.com/1025030/74482/ramp_config.js"></script> <script>window._pwGA4PageviewId=''.concat(Date.now()); window.dataLayer=window.dataLayer || []; window.gtag=window.gtag || function (){dataLayer.push(arguments);}; gtag('js', new Date()); gtag('config', 'G-JD7R9RWFZL',{'send_page_view': false}); gtag( 'event', 'ramp_js',{'send_to': 'G-JD7R9RWFZL', 'pageview_id': window._pwGA4PageviewId}); </script>
    <!-- End Playwire Head -->
  </head>
<body onload="checkURI()">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TDF58VB"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <header>
    <ul class="header">
      <li class="dropdown left">
        <a href="javascript:void(0)" class="dropbtn active">PvP IVs</a>
        <div class="dropdown-content">
          <a href="/">Rankings (Single)</a>
          <a href="/indexTest.html">Rankings (Beta)</a>
          <a href="/leagueRanks.html">Rankings (League)</a>
          <a href="/searchStr.html" class="active">Search Strings</a>
          <a href="/calculator.html">Calculator</a>
        </div>
      </li>
      <li class="dropdown left">
        <a href="javascript:void(0)" class="dropbtn">Typing</a>
        <div class="dropdown-content">
          <a href="/typeLookup.html">Chart</a>
          <a href="/typeQuiz.html">Quiz</a>
        </div>
      </li>
      <li class="flat right">
        <div class="theme-toggle-div">
          <img id="theme-toggle-icon" src="https://pvpivs.com/includes/sun.svg" aria-label="Change to light theme" alt="Sun icon" width="22" height="22">
        </div>
      </li>
      <li class="dropdown right">
        <a href="javascript:void(0)" class="dropburger"><div class="container"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div></a>
        <div class="dropdown-content dropdown-content-right">
          <a href="/about.html">About PvP IVs</a>
          <a href="/contribute.html">Contribute</a>
          <a href="/contact.html">Contact Us</a>
          <a href="/privacy.html">Privacy Policy</a>
          <a href="/cookies.html">Cookie Policy</a>
        </div>
      </li>
    </ul>
  </header>
  <section>
    <br />
    <input id="pokeList" onfocus="this.value=''" placeholder="Final Mon"/>
    <label>League:<select id="league" oninput="main(Awesomplete.input)">
      <option value="Raid">Raid / Hatch</option>
      <option value="500">Little Leagues</option>
      <option value="1500" selected>Great League</option>
    	<option value="2500">Ultra League</option>
    	<option value="ML">Master League</option>
  		<option value="All">All Leagues</option></select>
  	</label><br />
    <label id="getStarted"><i>Please first select an evolution family above, then boxes to select limits will appear...</i><br /></label>
    <div id="targetDiv" hidden><label id="targetLbl" for="target" style="display: none;">Find:</label><select id="target" oninput="main()"></select><div id="asDiv">&nbsp;As: </div></div>
    <div id="RaidlimitDiv" hidden>
      <label id="labelIVlimit" for="ivLim"> With Minimum IVs&#8805;</label><select id="ivLim" oninput="main()"><option value="45">100%</option><option value="44">98%</option><option value="43">96%</option><option selected value="42">93%</option><option value="41">91%</option><option value="40">89%</option><option value="39">87%</option><option value="38">84%</option><option value="37">82%</option><option value="36">80%</option><option value="35">78%</option><option value="34">76%</option><option value="33">73%</option><option value="32">71%</option><option value="31">69%</option><option value="30">67%</option></select>
      <label id="labelaLimit" for="aLim">, Attack&#8805;</label><select id="aLim" oninput="main()"><option value="">&nbsp;</option><option value="15">15</option><option value="14">14</option><option value="13">13</option><option value="12">12</option><option value="11">11</option><option value="10">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option></select>
      <label id="labeldLimit" for="dLim">, Defense&#8805;</label><select id="dLim" oninput="main()"><option value="">&nbsp;</option><option value="15">15</option><option value="14">14</option><option value="13">13</option><option value="12">12</option><option value="11">11</option><option value="10">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option></select>
      <label id="labelsLimit" for="sLim">, Stamina&#8805;</label><select id="sLim" oninput="main()"><option value="">&nbsp;</option><option value="15">15</option><option value="14">14</option><option value="13">13</option><option value="12">12</option><option value="11">11</option><option value="10">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option></select>
    </div>
    <div id="RaidOverrideDiv" hidden>
      <label id="LabeladdIV" for="addIV">Must Include IVs:</label><input id="addIV" oninput="main()"><label id="LabelexcludeIV" for="excludeIV">, Must Exclude IVs:</label><input id="excludeIV" oninput="main()">
    </div>
    <div class="evoLimits" id="evoLimits[1]"><input id="evoCB[1]" class="evoCBs" type="checkbox" onclick="main()"><div id="evoName[1]"></div>
      <div id="LLlimitDiv[1]"><label id="labelLLlimit[1]" for="LLlimit[1]">LL:</label><input type="number" value="10" id="LLlimit[1]" min="0" max="4096" oninput="main()"></div>
      <div id="GLlimitDiv[1]"><label id="labelGLlimit[1]" for="GLlimit[1]">GL:</label><input type="number" value="10" id="GLlimit[1]" min="0" max="4096" oninput="main()"></div>
      <div id="ULlimitDiv[1]"><label id="labelULlimit[1]" for="ULlimit[1]">UL:</label><input type="number" value="10" id="ULlimit[1]" min="0" max="4096" oninput="main()"></div>
      <div id="MLlimitDiv[1]"><label id="labelMLlimit[1]" for="MLlimit[1]">ML:</label><input type="number" value="10" id="MLlimit[1]" min="0" max="4096" oninput="main()"></div>
    <br /></div>
    <div class="evoLimits" id="evoLimits[2]"><input id="evoCB[2]" class="evoCBs" type="checkbox" onclick="main()"><div id="evoName[2]"></div>
      <div id="LLlimitDiv[2]"><label id="labelLLlimit[2]" for="LLlimit[2]">LL:</label><input type="number" value="10" id="LLlimit[2]" min="0" max="4096" oninput="main()"></div>
      <div id="GLlimitDiv[2]"><label id="labelGLlimit[2]" for="GLlimit[2]">GL:</label><input type="number" value="10" id="GLlimit[2]" min="0" max="4096" oninput="main()"></div>
      <div id="ULlimitDiv[2]"><label id="labelULlimit[2]" for="ULlimit[2]">UL:</label><input type="number" value="10" id="ULlimit[2]" min="0" max="4096" oninput="main()"></div>
      <div id="MLlimitDiv[2]"><label id="labelMLlimit[2]" for="MLlimit[2]">ML:</label><input type="number" value="10" id="MLlimit[2]" min="0" max="4096" oninput="main()"></div>
    <br /></div>
    <div class="evoLimits" id="evoLimits[3]"><input id="evoCB[3]" class="evoCBs" type="checkbox" onclick="main()"><div id="evoName[3]"></div>
      <div id="LLlimitDiv[3]"><label id="labelLLlimit[3]" for="LLlimit[3]">LL:</label><input type="number" value="10" id="LLlimit[3]" min="0" max="4096" oninput="main()"></div>
      <div id="GLlimitDiv[3]"><label id="labelGLlimit[3]" for="GLlimit[3]">GL:</label><input type="number" value="10" id="GLlimit[3]" min="0" max="4096" oninput="main()"></div>
      <div id="ULlimitDiv[3]"><label id="labelULlimit[3]" for="ULlimit[3]">UL:</label><input type="number" value="10" id="ULlimit[3]" min="0" max="4096" oninput="main()"></div>
      <div id="MLlimitDiv[3]"><label id="labelMLlimit[3]" for="MLlimit[3]">ML:</label><input type="number" value="10" id="MLlimit[3]" min="0" max="4096" oninput="main()"></div>
    <br /></div>
    <div class="evoLimits" id="evoLimits[4]"><input id="evoCB[4]" class="evoCBs" type="checkbox" onclick="main()"><div id="evoName[4]"></div>
      <div id="LLlimitDiv[4]"><label id="labelLLlimit[4]" for="LLlimit[4]">LL:</label><input type="number" value="10" id="LLlimit[4]" min="0" max="4096" oninput="main()"></div>
      <div id="GLlimitDiv[4]"><label id="labelGLlimit[4]" for="GLlimit[4]">GL:</label><input type="number" value="10" id="GLlimit[4]" min="0" max="4096" oninput="main()"></div>
      <div id="ULlimitDiv[4]"><label id="labelULlimit[4]" for="ULlimit[4]">UL:</label><input type="number" value="10" id="ULlimit[4]" min="0" max="4096" oninput="main()"></div>
      <div id="MLlimitDiv[4]"><label id="labelMLlimit[4]" for="MLlimit[4]">ML:</label><input type="number" value="10" id="MLlimit[4]" min="0" max="4096" oninput="main()"></div>
    <br /></div>
    <div class="evoLimits" id="evoLimits[5]"><input id="evoCB[5]" class="evoCBs" type="checkbox" onclick="main()"><div id="evoName[5]"></div>
      <div id="LLlimitDiv[5]"><label id="labelLLlimit[5]" for="LLlimit[5]">LL:</label><input type="number" value="10" id="LLlimit[5]" min="0" max="4096" oninput="main()"></div>
      <div id="GLlimitDiv[5]"><label id="labelGLlimit[5]" for="GLlimit[5]">GL:</label><input type="number" value="10" id="GLlimit[5]" min="0" max="4096" oninput="main()"></div>
      <div id="ULlimitDiv[5]"><label id="labelULlimit[5]" for="ULlimit[5]">UL:</label><input type="number" value="10" id="ULlimit[5]" min="0" max="4096" oninput="main()"></div>
      <div id="MLlimitDiv[5]"><label id="labelMLlimit[5]" for="MLlimit[5]">ML:</label><input type="number" value="10" id="MLlimit[5]" min="0" max="4096" oninput="main()"></div>
    <br /></div>
    <div class="evoLimits" id="evoLimits[6]"><input id="evoCB[6]" class="evoCBs" type="checkbox" onclick="main()"><div id="evoName[6]"></div>
      <div id="LLlimitDiv[6]"><label id="labelLLlimit[6]" for="LLlimit[6]">LL:</label><input type="number" value="10" id="LLlimit[6]" min="0" max="4096" oninput="main()"></div>
      <div id="GLlimitDiv[6]"><label id="labelGLlimit[6]" for="GLlimit[6]">GL:</label><input type="number" value="10" id="GLlimit[6]" min="0" max="4096" oninput="main()"></div>
      <div id="ULlimitDiv[6]"><label id="labelULlimit[6]" for="ULlimit[6]">UL:</label><input type="number" value="10" id="ULlimit[6]" min="0" max="4096" oninput="main()"></div>
      <div id="MLlimitDiv[6]"><label id="labelMLlimit[6]" for="MLlimit[6]">ML:</label><input type="number" value="10" id="MLlimit[6]" min="0" max="4096" oninput="main()"></div>
    <br /></div>
    <div class="evoLimits" id="evoLimits[7]"><input id="evoCB[7]" class="evoCBs" type="checkbox" onclick="main()"><div id="evoName[7]"></div>
      <div id="LLlimitDiv[7]"><label id="labelLLlimit[7]" for="LLlimit[7]">LL:</label><input type="number" value="10" id="LLlimit[7]" min="0" max="4096" oninput="main()"></div>
      <div id="GLlimitDiv[7]"><label id="labelGLlimit[7]" for="GLlimit[7]">GL:</label><input type="number" value="10" id="GLlimit[7]" min="0" max="4096" oninput="main()"></div>
      <div id="ULlimitDiv[7]"><label id="labelULlimit[7]" for="ULlimit[7]">UL:</label><input type="number" value="10" id="ULlimit[7]" min="0" max="4096" oninput="main()"></div>
      <div id="MLlimitDiv[7]"><label id="labelMLlimit[7]" for="MLlimit[7]">ML:</label><input type="number" value="10" id="MLlimit[7]" min="0" max="4096" oninput="main()"></div>
    <br /></div>
    <div class="evoLimits" id="evoLimits[8]"><input id="evoCB[8]" class="evoCBs" type="checkbox" onclick="main()"><div id="evoName[8]"></div>
      <div id="LLlimitDiv[8]"><label id="labelLLlimit[8]" for="LLlimit[8]">LL:</label><input type="number" value="10" id="LLlimit[8]" min="0" max="4096" oninput="main()"></div>
      <div id="GLlimitDiv[8]"><label id="labelGLlimit[8]" for="GLlimit[8]">GL:</label><input type="number" value="10" id="GLlimit[8]" min="0" max="4096" oninput="main()"></div>
      <div id="ULlimitDiv[8]"><label id="labelULlimit[8]" for="ULlimit[8]">UL:</label><input type="number" value="10" id="ULlimit[8]" min="0" max="4096" oninput="main()"></div>
      <div id="MLlimitDiv[8]"><label id="labelMLlimit[8]" for="MLlimit[8]">ML:</label><input type="number" value="10" id="MLlimit[8]" min="0" max="4096" oninput="main()"></div>
    <br /></div>
    <div class="evoLimits" id="evoLimits[9]"><input id="evoCB[9]" class="evoCBs" type="checkbox" onclick="main()"><div id="evoName[9]"></div>
      <div id="LLlimitDiv[9]"><label id="labelLLlimit[9]" for="LLlimit[9]">LL:</label><input type="number" value="10" id="LLlimit[9]" min="0" max="4096" oninput="main()"></div>
      <div id="GLlimitDiv[9]"><label id="labelGLlimit[9]" for="GLlimit[9]">GL:</label><input type="number" value="10" id="GLlimit[9]" min="0" max="4096" oninput="main()"></div>
      <div id="ULlimitDiv[9]"><label id="labelULlimit[9]" for="ULlimit[9]">UL:</label><input type="number" value="10" id="ULlimit[9]" min="0" max="4096" oninput="main()"></div>
      <div id="MLlimitDiv[9]"><label id="labelMLlimit[9]" for="MLlimit[9]">ML:</label><input type="number" value="10" id="MLlimit[9]" min="0" max="4096" oninput="main()"></div>
    <br /></div>
    <div id="errorBox"></div>
    <br /><br />
      <textarea id="output" rows="10" style="width: 95%; height: 50%;" onclick="autocopy(this)"></textarea>
      <div id="outputSummaryBox"></div>
      <div id="feedbackBox"></div><br />
    <br /><br />
    <script async defer src="https://pvpivs.com/includes/darkLightThemes.js"></script>
    <script async defer src="https://pvpivs.com/includes/collapsible.js"></script>
    <script src="https://pvpivs.com/includes/calculate.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.js"></script>
    <script src="https://pvpivs.com/includes/pokeListObj.js"></script>
    <script>
    /* Constants for translations */
    const LANGUAGE = 0;     /* Language*/
    const LANG_CP = 1;      /* CPstring*/
    const LANG_HP = 2;      /* HPstring*/
    const LANG_ATK = 3;     /* Attack  */
    const LANG_DEF = 4;     /* Defense */
    const LANG_FAV = 5;     /* Favorite*/
    const LANG_MEGA = 6;    /* Mega    */
    const LANG_EGG = 7;     /* EggsOnly*/
    const LANG_BUG = 8;     /* Bug     */
    const LANG_DARK = 9;    /* Dark    */
    const LANG_DRAGON = 10; /* Dragon  */
    const LANG_ELECTRIC=11; /* Electric*/
    const LANG_FAIRY = 12;  /* Fairy   */
    const LANG_FIGHTING=13; /* Fighting*/
    const LANG_FIRE = 14;   /* Fire    */
    const LANG_FLYING = 15; /* Flying  */
    const LANG_GHOST = 16;  /* Ghost   */
    const LANG_GRASS = 17;  /* Grass   */
    const LANG_GROUND = 18; /* Ground  */
    const LANG_ICE = 19;    /* Ice     */
    const LANG_NORMAL = 20; /* Normal  */
    const LANG_POISON = 21; /* Poison  */
    const LANG_PSYCHIC =22; /* Psychic */
    const LANG_ROCK = 23;   /* Rock    */
    const LANG_STEEL = 24;  /* Steel   */
    const LANG_WATER = 25;  /* Water   */
    const LANG_COSTUME = 26;/* Costume */
    const LANG_FEMALE = 27; /* Female  */
    const LANG_MALE = 28;   /* Male    */
    var perfTiming = false; /* used for timing execution */
    
    var input = document.getElementById("pokeList");
    var inputMon = "";
    var monNames = Object.keys(pokeListObj);
    /* Ensure we've successfully loaded pokeListObj, and converted to list for awesomplete */
    if (monNames.length<1000) /* At time of writing, monNames.length was 1025 */
    {
      console.error("monNames.length ("+monNames.length+") shorter than expected (1000), check pokeListObj load");
      document.getElementById('feedbackBox').innerHTML = "<p><i>ERROR: Failed to load, please try again.<br>If this issue persists, please <a href='https://discord.gg/UD4Temq'>contact us on Discord</i></p>";
      console.error("DEBUG: pokeListObj: "+JSON.stringify(pokeListObj));
      console.error("DEBUG: monNames: "+JSON.stringify(monNames));
    } else {
      new Awesomplete(input, {list: monNames});
      /*https://github.com/LeaVerou/awesomplete/issues/16438#issuecomment-195921708*/
      Awesomplete.$.bind(input, {
        "awesomplete-selectcomplete": function(evt) {
          /*console.log("User Selected "+evt.text.label+", passing to main and exiting Awesomplete");*/
          inputMon = evt.text.label;
          main(evt.text.label);
        }
      });
      /* end Awesomeplete https://leaverou.github.io/awesomplete/ */
    }
  
    function checkURI() {
      var T0;
      if (perfTiming) {T0 = performance.now();}
      var URL = window.location.href.split("?")[1],i,j;
      /*URL = "mon=Poliwrath&cp=1500&r=f_f_10_f_f&";*/
      
      if (URL)
      {
        URL = decodeURI(URL);
        /*console.log("checkURI: Read URL as: "+URL);*/
        var values = URL.split("&");
        /*console.log("checkURI: Values array as: "+JSON.stringify(values));*/
        for (i=0; i<values.length; i++)
        {
          switch (values[i].split("=")[0]) {
            case "mon":
              input.value = values[i].split("=")[1];
              /* Conditional for allZero mode */
              if (!(input.value)) {
                document.getElementById('allZero').checked = true;
              } else { /* Ensure input shows in awesomplete box */
                Awesomplete.input = input.value;
              }
              /* We have a valid mon, hide the 'getting started' mon selection help text */
              document.getElementById('getStarted').style.display = "none";
              break;
              
            case "r":
              var rStr = (values[i].split("=")[1]).split("_");
              /*console.log("checkURI: Received rStr:"+rStr);*/
              for (j=0; j<rStr.length; j++) {
                if (rStr[j] != "f") {
                  var limits = (rStr[j]).split("-");
                  /*console.log("checkURI: Processing rStr["+j+"]: "+rStr[j]+" and limits:"+limits);*/
                  document.getElementById('evoCB['+(j+1)+']').checked = true;
                  
                  switch (document.getElementById('league').value) {
                    case "Raid":
                      document.getElementById('LLlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelGLlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('GLlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelGLlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('ULlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelULlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('MLlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelMLlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('RaidlimitDiv').style="display: inline-block;";
                      document.getElementById('RaidOverrideDiv').style="display: inline-block;";
                      break;
                    case "All":
                      document.getElementById('LLlimit['+(j+1)+']').value = limits[0];
                      document.getElementById('GLlimit['+(j+1)+']').value = limits[1];
                      document.getElementById('ULlimit['+(j+1)+']').value = limits[2];
                      document.getElementById('MLlimit['+(j+1)+']').value = limits[3];
                      document.getElementById('LLlimit['+(j+1)+']').style="display: inline-block;"; /*document.getElementById('labelGLlimit['+(j+1)+']').style="display: inline-block;";*/
                      document.getElementById('GLlimit['+(j+1)+']').style="display: inline-block;"; /*document.getElementById('labelGLlimit['+(j+1)+']').style="display: inline-block;";*/
                      document.getElementById('ULlimit['+(j+1)+']').style="display: inline-block;"; /*document.getElementById('labelULlimit['+(j+1)+']').style="display: inline-block;";*/
                      document.getElementById('MLlimit['+(j+1)+']').style="display: inline-block;"; /*document.getElementById('labelMLlimit['+(j+1)+']').style="display: inline-block;";*/
                      document.getElementById('RaidlimitDiv').style.display="none";
                      document.getElementById('RaidOverrideDiv').style.display="none";
                      break;
                    case "500":
                      document.getElementById('LLlimit['+(j+1)+']').value = limits[0];
                      document.getElementById('LLlimit['+(j+1)+']').style="display: inline-block;"; /*document.getElementById('labelGLlimit['+(j+1)+']').style="display: inline-block;";*/
                      document.getElementById('GLlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelGLlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('ULlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelULlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('MLlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelMLlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('RaidlimitDiv').style.display="none";
                      document.getElementById('RaidOverrideDiv').style.display="none";
                      break;
                    case "1500":
                      document.getElementById('GLlimit['+(j+1)+']').value = limits[0];
                      document.getElementById('LLlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelGLlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('GLlimit['+(j+1)+']').style="display: inline-block;"; /*document.getElementById('labelGLlimit['+(j+1)+']').style="display: inline-block;";*/
                      document.getElementById('ULlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelULlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('MLlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelMLlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('RaidlimitDiv').style.display="none";
                      document.getElementById('RaidOverrideDiv').style.display="none";
                      break;
                    case "2500":
                      document.getElementById('ULlimit['+(j+1)+']').value = limits[0];
                      document.getElementById('LLlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelGLlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('GLlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelGLlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('ULlimit['+(j+1)+']').style="display: inline-block;"; /*document.getElementById('labelULlimit['+(j+1)+']').style="display: inline-block;";*/
                      document.getElementById('MLlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelMLlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('RaidlimitDiv').style.display="none";
                      document.getElementById('RaidOverrideDiv').style.display="none";
                      break;
                    default:
                      document.getElementById('MLlimit['+(j+1)+']').value = limits[0];
                      document.getElementById('LLlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelGLlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('GLlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelGLlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('ULlimit['+(j+1)+']').style="display: none;"; /*document.getElementById('labelULlimit['+(j+1)+']').style="display: none;";*/
                      document.getElementById('MLlimit['+(j+1)+']').style="display: inline-block;"; /*document.getElementById('labelMLlimit['+(j+1)+']').style="display: inline-block;";*/
                      document.getElementById('RaidlimitDiv').style.display="none";
                      document.getElementById('RaidOverrideDiv').style.display="none";
                  }
                } else {
                  if (j>0) {document.getElementById('evoCB['+(j+1)+']').value = false;}
                }
              }
              break;
              
            case "cp":
              document.getElementById('league').value = values[i].split("=")[1];
              break;

            case "trash":
              var settings = (''+values[i].split("=")[1]);
              if (settings[0]==="1") {
                document.getElementById('trash').checked = true;
                document.getElementById('trashAdv').style.display = "block";
              } else {
                document.getElementById('trash').checked = false;
                document.getElementById('trashAdv').style.display = "none";
              }
              document.getElementById('excludeHundo').checked = settings[1]==="1" ? true : false;
              document.getElementById('excludeZero').checked = settings[2]==="1" ? true : false;
              document.getElementById('excludeXXL').checked = settings[3]==="1" ? true : false;
              document.getElementById('excludeXXS').checked = settings[4]==="1" ? true : false;
              document.getElementById('excludeXL').checked = settings[5]==="1" ? true : false;
              document.getElementById('excludeXS').checked = settings[6]==="1" ? true : false;
              document.getElementById('excludeTags').checked = settings[7]==="1" ? true : false;
              document.getElementById('excludeFavs').checked = settings[8]==="1" ? true : false;
              break;

            case "adv":
              var settings = (''+values[i].split("=")[1]);
              /* If any Advanced Settings are changed, open Advanced Collapsible to show user */
              if (settings !== "001") {
                collapsible("advCollapsible","advArrow");
              }
              document.getElementById('customIVs').checked = settings[0]==="1" ? true : false;
              document.getElementById('allZero').checked = settings[1]==="1" ? true : false;
              document.getElementById('noBadEvos').checked = settings[2]==="1" ? true : false;
              document.getElementById('fpRate').checked = settings[3]==="1" ? true : false;
              
              break;
              break;
              
            case "l":
              var lang = document.getElementById('lang');
              var languages = lang.options.length;
              for (j=0; j<languages; j++) {
                if (lang.options[j].value.split(",")[0] === values[i].split("=")[1]) {
                  lang.options[j].selected = true;
                  break;
                }
              }
              break;
              
            case "m": /* Enable Levels beyond 40 for Search Strings */
              document.getElementById('maxBattleLvl').value = values[i].split("=")[1];
              break;
              
            case "slMin": /* Enable Search Level filtering for Search Strings */
              document.getElementById('minSearchLvl').value = values[i].split("=")[1];
              break;
            case "slMax": /* Enable Search Level filtering for Search Strings */
              document.getElementById('maxSearchLvl').value = values[i].split("=")[1];
              break;
              
            case "t": /* Enable performance timing output in console for debugging */
              perfTiming = values[i].split("=")[1];
              break;
            
            case "IVentry":
              document.getElementById('customIVs').checked = true;
              document.getElementById('IVentry').value = values[i].split("=")[1];
              break;
              
            case "ivLim":
              document.getElementById('ivLim').value = values[i].split("=")[1];
              break;
              
            case "a":
              document.getElementById('aLim').value = values[i].split("=")[1];
              break;
              
            case "d":
              document.getElementById('dLim').value = values[i].split("=")[1];
              break;
              
            case "s":
              document.getElementById('sLim').value = values[i].split("=")[1];
              break;
            
            case "addIV":
              document.getElementById('addIV').value = values[i].split("=")[1];
              break;
            
            case "notIV":
              document.getElementById('excludeIV').value = values[i].split("=")[1];
              break;
          }
        }
        
        /* Exit if we don't have a valid input.value (mon) yet */
        if (typeof input.value === 'undefined' || input.value === null || typeof pokeListObj[input.value] === 'undefined') {
          console.log("checkURI: No Pokémon detected, awaiting user input (input.value==='"+input.value+"')");
          if (perfTiming) {stopTiming(T0, "checkURI");}
          return;
        }
        
        if (perfTiming) {stopTiming(T0, "checkURI");}
        console.log("checkURI: calling buildSearchString with input.value:"+input.value+" and true");
        buildSearchString(input.value, true);
        return;
      }
      else
      {
        console.log("checkURI: No inputs detected, awaiting user input");
        if (perfTiming) {stopTiming(T0, "checkURI");}
        return;
      }
    }
    
    function main(mon) {
      
      var T0,i;
      if (perfTiming) {T0 = performance.now();}
      
      /* Save state of mon as we override it later on */
      var newMon = (mon) ? true : false;
      
      /* Reset all evoLimits / name divs */
      for (i=1; i<10; i++) {
        document.getElementById('evoName['+i+']').innerHTML = "";
        document.getElementById('evoName['+i+']').style.display = "none";
        document.getElementById('evoLimits['+i+']').style.display = "none";
        if (newMon) { /* Only reset these if a new mon is selected */
          document.getElementById('evoCB['+i+']').checked = false;
          document.getElementById('LLlimit['+i+']').value = "10";
          document.getElementById('GLlimit['+i+']').value = "10";
          document.getElementById('ULlimit['+i+']').value = "10";
          document.getElementById('MLlimit['+i+']').value = "10";
        }
      }
      
      if (newMon) { /* Clear target when new mon is selected */
        document.getElementById('target').innerHTML = "";
      }
      
      /* Ensure messages from prior runs are cleared */
      document.getElementById('feedbackBox').innerHTML = "";
      document.getElementById("errorBox").innerHTML = "";
      document.getElementById("overflowArea").innerHTML = "";
      document.getElementById("outputSummaryBox").innerHTML = "";
      
      /* Hide/Show advanced Settings as appropriate */
      if (document.getElementById('trash').checked) {document.getElementById('trashAdv').style.display = "block";}
      else {document.getElementById('trashAdv').style.display = "none";}
      
      /* See if this was a request for all-mon Zero IV string */
      if (document.getElementById('allZero').checked) {
        document.getElementById('getStarted').style.display = "none";
        findAllZeros();
        
        /* Ensure we update the URL before returning */
        updateURI(false,0);
        if (perfTiming) {stopTiming(T0, "main");}
        return;
      }
      
      /* Awesomeplete sends "undefined" when it did not find a valid input */
      if (mon === undefined) { /* Determine if we have a valid, previously selected mon we can use */
        if ((pokeListObj[input.value]) || (pokeListObj[inputMon])) {
          console.log("main: Found a valid input.value of:"+JSON.stringify(input.value));
          /* Correct for autocomplete input being cleared accidentally */
          if ((!(pokeListObj[input.value])) && (pokeListObj[inputMon])) {
            input.value = inputMon;
          }
          mon = input.value;
          /*console.log("SET MON TO:"+mon);*/
        }
      }
      
      /* Exit if we don't have a valid mon yet */
      if (typeof mon === 'undefined' || mon === null || typeof pokeListObj[mon] === 'undefined') {
        console.log("main: No Pokémon received by main()");
        document.getElementById('getStarted').style.display = "block";
        document.getElementById('output').value = "";
        document.getElementById('targetDiv').style.display = "none";
        document.getElementById('RaidlimitDiv').style.display = "none";
        document.getElementById('RaidOverrideDiv').style.display = "none";
        document.getElementById('targetLbl').style.display = "none";
        document.getElementById('asDiv').style.display = "none";
        if (perfTiming) {stopTiming(T0, "main");}
        return;
      }
      /* We have a valid mon, hide the 'getting started' help text and build Search String*/
      document.getElementById('getStarted').style.display = "none";
      if (perfTiming) {stopTiming(T0, "main");}
      buildSearchString(mon, newMon);
    }
    
    function buildSearchString(mon, newMon) {
      
      var T0,i,j;
      if (perfTiming) {T0 = performance.now();}
      
      var league = document.getElementById('league').value;
      var maxBattleLvl = document.getElementById('maxBattleLvl').value;
      var output = document.getElementById('output');
      var target = document.getElementById("target");
      var value = pokeListObj[mon].split(',');
      var evoVals = [];
      /* Constants for minimum CP "cutoffs" to simplify results */
      const LLcutoff = 400;
      const GLcutoff = 1000;
      const ULcutoff = 2000;
      const MLcutoff = 2500;
      
      /* Strip out stats, leave only mon names */
      var monFamilyNames = value.slice(4,value.length);
      monFamilyNames.unshift(mon); /* add selected mon to front to complete monFamilyNames */
      
      /* Use monFamilyNames to build target list (if new mon selected), and evoVals */
      for (i=0; i<monFamilyNames.length; i++) {
        
        if (newMon) {
          var option = document.createElement("option");
          option.text = monFamilyNames[i];
          target.add(option);
        }
        
        /** Initialize evoVals as defined:
         * ex: ["485",251,213,209,"Heatran",3754,10,10,10]
         * evoVals[][0] = dexNum as placeholder
         * evoVals[][1] = base attack stat
         * evoVals[][2] = base defense stat
         * evoVals[][3] = base stamina stat
         * evoVals[][4] = Awesomplete label (mon name)
         * evoVals[][5] = Max CP (calculated)
         *** FINISHED LATER ON AFTER SORTING ***
         **/
        var stats = pokeListObj[monFamilyNames[i]].split(",");
        var level = (maxBattleLvl - 1)*2;
        evoVals[i] = new Array(9).fill(0);
        evoVals[i][0] = stats[0];
        evoVals[i][1] = stats[1]/1;
        evoVals[i][2] = stats[2]/1;
        evoVals[i][3] = stats[3]/1;
        evoVals[i][4] = monFamilyNames[i];
        evoVals[i][5] = Math.max(10, Math.floor((stats[1]/1 + 15) * Math.sqrt(stats[2]/1 + 15) * Math.sqrt(stats[3]/1 + 15) * cpm[level] * cpm[level] / 10))/1;
      }
      /* Sort evoVals by maxCP (evoVals[][5]) for consistency */
      evoVals = evoVals.sort(function(a, b) { return a[5] - b[5];});
      /* Fix base mon for Weedle/Kakuna, Wurmple/Silcoon, and Trapinch/Vibrava (lower max cp when evolved) */
      if (evoVals[0][4] === "Kakuna" || evoVals[0][4] === "Silcoon" || evoVals[0][4] === "Vibrava") {
        [evoVals[0], evoVals[1]] = [evoVals[1], evoVals[0]];
        console.log("buildSearchString: Corrected evoVals for "+evoVals[0][4]+": "+JSON.stringify(evoVals));
      }
      
      /* Only run if there are evolutions, skip for Heatmor, etc */
      if (evoVals.length > 1) {
        
        /* Use sorted evoVals to set target to base mon (not baby), only run when new mon selected */
        if (newMon) {
          if (evoVals[0][0].includes("&eggsonly") && !(value[0].includes("&eggsonly"))) {
            console.log("buildSearchString: Removing impossible baby evolution, evoVals[0]:"+JSON.stringify(evoVals[0]));
            target.value = evoVals[1][4];
          } else {
            target.value = evoVals[0][4];
          }
        }
        /* Ensure that base mon (evoVals[0]) matches user selected target */
        if (target.value != evoVals[0][4]) {
          for (i=1; i<evoVals.length; i++) {
            /* Swap evoVals[target.value] to evoVals[0] https://stackoverflow.com/a/872317 */
            if (evoVals[i][4] === target.value) {[evoVals[0], evoVals[i]] = [evoVals[i], evoVals[0]];}
          }
        }
        
        /* There are evolutions, unhide target options */
        document.getElementById("targetDiv").style.display = "inline-block";
        document.getElementById('targetLbl').style.display = "inline-block";
        document.getElementById('asDiv').style.display = "inline-block";
        
        /* Remove impossible evolutions from evoVals based on target */
        if (document.getElementById('noBadEvos').checked) {
          for (i=1; i<evoVals.length; i++) {
            if ((evoVals[0][5]/1 > evoVals[i][5]/1) ||
               ((evoVals[0][4] === "Kakuna" && evoVals[i][4] === "Weedle") ||
                (evoVals[0][4] === "Silcoon" && evoVals[i][4] === "Wurmple") ||
                (evoVals[0][4] === "Vibrava" && evoVals[i][4] === "Trapinch"))) {
               /* Need to remove Weedle/Wurmple/Trapinch as evos of Kakuna/Silcoon/Vibrava too */
              
              if ((evoVals[0][4] === "Weedle" && evoVals[i][4] === "Kakuna") ||
                  (evoVals[0][4] === "Wurmple" && evoVals[i][4] === "Silcoon") ||
                  (evoVals[0][4] === "Trapinch" && evoVals[i][4] === "Vibrava")) {
                    /* Don't remove Kakuna/Silcoon/Vibrava as evos of Weedle/Wurmple/Trapinch */
                    /*console.log("buildSearchString: False alarm, not an impossible evolution, continuing...");*/
                    continue;
              }
              console.log("buildSearchString: Detected impossible evolution, removing "+evoVals[i][4]+"("+evoVals[i][5]+")");
              evoVals.splice(i, 1);
              /* We just removed this i, need to re-check it */
              i--;
            }
          }
        }
  
        /* If base could also be an evo, add duplicate entry */
        /* Example test cases: Rhyhorn, Electabuzz */
        if (((evoVals[0][5] > LLcutoff) && ((league === "500")  || (league ===  "All"))) ||
            ((evoVals[0][5] > GLcutoff) && ((league === "1500") || (league ===  "All"))) ||
            ((evoVals[0][5] > ULcutoff) && ((league === "2500") || (league ===  "All"))) ||
            ((evoVals[0][5] > MLcutoff) && ((league === "ML")   || (league ===  "All")))) {
          /*console.log("Detected base ("+evoVals[0][4]+") that could be evo, duplicating...");*/
          evoVals.push([...evoVals[0]]); /* Don't just copy pointer, copy values! */
        }
      } else {
        /* Otherwise reset to default hidden status, default text */
        console.log("buildSearchString: No evos detected, hiding target...");
        document.getElementById("targetDiv").style.display = "none";
        document.getElementById("targetLbl").style.display = "none";
        document.getElementById('asDiv').style.display = "none";
        
        /* Duplicate the only entry to ensure we have a final mon to output */
        evoVals.push([...evoVals[0]]); /* Don't just copy pointer, copy values! */
      }
      /* Add name to Output Levels label */
      document.getElementById("searchLvlLbl").innerHTML = "Set your Search "+evoVals[0][4]+" Levels (Lowest-Highest):";
      
      /* Ensure we have a clean dex number to output */
      evoVals[0][0] = evoVals[0][0].split("b").join("");
      var finalEvoAtk, finalEvoDef, finalEvoSta;
      
      /* If this was a request for custom IV Search String, output custom IV string */
      if (document.getElementById('customIVs').checked) {
        
        /* Show Custom IVs User Input box */
        document.getElementById("IVentry").style.display = "inline-block";
        document.getElementById("IVentryLbl").style.display = "inline-block";
        
        /* Separate and format customIVs, starting with whitespace */
        var customIVs = document.getElementById('IVentry').value.split(/[ ,]+/);
        for (i=0; i<customIVs.length; i++) {
          /* Strip out IV separators and save each IV */
          customIVs[i] = customIVs[i].split(/[^0-9]+/);
          console.log("buildSearchString: customIVs["+i+"]:"+JSON.stringify(customIVs[i]));
        }
        document.getElementById('feedbackBox').innerHTML = "<p><i>Read custom IVs as: "+JSON.stringify(customIVs)+"</i></p>";
        
        /* Set final evo stats if they exist, otherwise copy base mon stats */
        finalEvoAtk = evoVals[2]?.[1] ? evoVals[2][1] : evoVals[0][1];
        finalEvoDef = evoVals[2]?.[2] ? evoVals[2][2] : evoVals[0][2];
        finalEvoSta = evoVals[2]?.[3] ? evoVals[2][3] : evoVals[0][3];
        outputCustomIVsStr(customIVs, evoVals[0][1], evoVals[0][2], evoVals[0][3], finalEvoAtk, finalEvoDef, finalEvoSta, league, output, maxBattleLvl, evoVals[0][0], evoVals[0][4]);
        
        /* Ensure we update the URL before returning */
        updateURI(mon,0);
        return;
      } else {
        document.getElementById("IVentry").style.display = "none";
        document.getElementById("IVentryLbl").style.display = "none";
      }
      
      /* Raid IV Search String Handler */
      if (league === "Raid") {
        
        /* Un-hide User Input boxes */
        document.getElementById('RaidlimitDiv').style.display = "inline-block";
        document.getElementById('RaidOverrideDiv').style.display = "inline-block";
        document.getElementById('targetDiv').style.display = "inline-block";
        document.getElementById("targetLbl").style.display = "inline-block";
        document.getElementById('asDiv').style.display = "none";
        
        /* Create raidIVs (customIVs) formatted string to output via outputCustomIVsStr */
        var attackIVlim = document.getElementById('aLim').value ? document.getElementById('aLim').value:-1*1;
        var defenseIVlim = document.getElementById('dLim').value ? document.getElementById('dLim').value:-1*1;
        var staminaIVlim = document.getElementById('sLim').value ? document.getElementById('sLim').value:-1*1;
        var IVlim = document.getElementById('ivLim').value ? document.getElementById('ivLim').value:"";
        var raidIVs = [];
        
        /* Separate and format addIV and excludeIV, starting with whitespace, set to false if blank to skip processing */
        var addIV = document.getElementById('addIV').value.split(/[ ,]+/) === "" ? false : document.getElementById('addIV').value.split(/[ ,]+/);
        var excludeIV = document.getElementById('excludeIV').value.split(/[ ,]+/) === "" ? false : document.getElementById('excludeIV').value.split(/[ ,]+/);
        
        /* Strip out IV separators and save each IV */
        for (i=0; i<addIV.length; i++) {
          addIV[i] = addIV[i].split(/[^0-9]+/);
        }
        for (i=0; i<excludeIV.length; i++) {
          excludeIV[i] = excludeIV[i].split(/[^0-9]+/);
        }
        
        for (var a=15; a/1>=attackIVlim/1; a--) {
          for (var d=15; d/1>=defenseIVlim/1; d--) {
            loop3:
              for (var s=15; s/1>=staminaIVlim/1; s--) {
                /* Check to make sure the user didn't Exclude this IV */
                for (i=0; i<excludeIV.length; i++) {
                  if ((a/1 === excludeIV[i][0]) && (d/1 === excludeIV[i][1]) && (s/1 === excludeIV[i][2])) {
                    /* console.log("buildSearchString: Found a match! Excluding IV: "+a+"/"+d+"/"+s); */
                    continue loop3; /*Ignore this IV set, it is excluded */
                  }
                }
                if ((a/1+d/1+s/1)>=IVlim/1) {
                  raidIVs.push([a,d,s]);
                }
              }
          }
        }
        /* Check to make sure the user's Added IVs are included */
        for (i=0; i<addIV.length; i++) {
          var included = false;
          for (j=0; j<raidIVs.length; j++) {
            if ((addIV[i][0]/1 === raidIVs[j][0]/1) && (addIV[i][1]/1 === raidIVs[j][1]/1) && (addIV[i][2]/1 === raidIVs[j][2]/1)) {
              included = true;
              /*console.log("buildSearchString: Found a match! IV already included: "+addIV[i][0]/1+"/"+addIV[i][1]/1+"/"+addIV[i][2]/1);*/
              break;
            }
          }/* If we didn't find the IV the user wants added, then add it to raidIVs */
          if (included === false) {
            raidIVs.push([addIV[i][0]/1,addIV[i][1]/1,addIV[i][2]/1]);
            /*console.log("buildSearchString: Pushed ("+addIV[i]+") to raidIVs");*/
          }
        }
        
        /* Set final evo stats if they exist, otherwise copy base mon stats */
        finalEvoAtk = evoVals[2]?.[1] ? evoVals[2][1] : evoVals[0][1];
        finalEvoDef = evoVals[2]?.[2] ? evoVals[2][2] : evoVals[0][2];
        finalEvoSta = evoVals[2]?.[3] ? evoVals[2][3] : evoVals[0][3];
        outputCustomIVsStr(raidIVs, evoVals[0][1], evoVals[0][2], evoVals[0][3], finalEvoAtk, finalEvoDef, finalEvoSta, league, output, maxBattleLvl, evoVals[0][0], evoVals[0][4]);
        
        /* Ensure we update the URL before returning */
        updateURI(mon,0);
        return;
      } else { /* If not in raid mode, hide these */
        document.getElementById('RaidlimitDiv').style.display = "none";
        document.getElementById('RaidOverrideDiv').style.display = "none";
      }
      /**
       * Unhides all checkboxes for family evos, and fills
       * league limits as appropriate for all evolutions.
       **/
      var somethingChecked = false;
      for (i=1; i<evoVals.length; i++) {
        
        /* Ensure selected mon's checkbox starts checked */
        if (mon === evoVals[i][4] && newMon) {
          document.getElementById('evoCB['+i+']').checked = true;
          somethingChecked = true;
          console.log("buildSearchString: auto-checked evoCB["+i+"] for "+mon+" as newMon="+newMon);
        } else { /* See if anything is checked */
          if (document.getElementById('evoCB['+i+']').checked) {
            somethingChecked = true;
          }
        }
      }
      /* If this is a new mon and nothing is checked, let's check something! */
      if (newMon && !somethingChecked) {
        document.getElementById('evoCB['+(evoVals.length-1)+']').checked = true;
        console.log("buildSearchString: Detected nothing checked, auto-checked evoCB["+(evoVals.length/1-1)+"]");
        somethingChecked = true;
      }
      /* Now that at least one is checked, build the rest of evoVals */
      for (i=1; i<evoVals.length; i++) {
        /** Fill evoVals as defined:
         * ex: ["485",251,213,209,"Heatran",3754,10,10,10]
         * evoVals[][0] = dexNum or "false" if unchecked */
        evoVals[i][0] = document.getElementById('evoCB['+i+']').checked ? evoVals[i][0] : false;
        /**...below already filled previously...
         * ...evoVals[][1] = base attack stat
         * ...evoVals[][2] = base defense stat
         * ...evoVals[][3] = base stamina stat
         * ...evoVals[][4] = Awesomplete label (mon name)
         * ...evoVals[][5] = Max CP (calculated)
         * ...above already filled previously...
         * evoVals[][6] = Little League #ranks
         * evoVals[][7] = Great  League #ranks
         * evoVals[][8] = Ultra  League #ranks
         * evoVals[][9] = Master League #ranks
         **/
        
        /* Unhide and fill evoName[]s as appropriate */
        document.getElementById('evoName['+i+']').innerHTML = evoVals[i][4]+" ("+evoVals[i][5]+")";
        document.getElementById('evoName['+i+']').style.display = "inline-block";
        document.getElementById('evoLimits['+i+']').style.display = "inline-block";
        document.getElementById('LLlimitDiv['+i+']').style.display = ((evoVals[i][5] > LLcutoff) && ((league === "All") || (league === "500")))  ? "inline-block" : "none";
        document.getElementById('GLlimitDiv['+i+']').style.display = ((evoVals[i][5] > GLcutoff) && ((league === "All") || (league === "1500"))) ? "inline-block" : "none";
        document.getElementById('ULlimitDiv['+i+']').style.display = ((evoVals[i][5] > ULcutoff) && ((league === "All") || (league === "2500"))) ? "inline-block" : "none";
        document.getElementById('MLlimitDiv['+i+']').style.display = ((evoVals[i][5] > MLcutoff) && ((league === "All") || (league === "ML")))   ? "inline-block" : "none";
        /*console.log("buildSearchString: Added "+evoVals[i][4]+" to list, un-hid evoLimits["+i+"]");*/
        
        evoVals[i][6] = ((evoVals[i][5] > LLcutoff) && ((league === "All") || (league ===  "500"))) ? document.getElementById('LLlimit['+i+']').value/1:0*1;
        evoVals[i][7] = ((evoVals[i][5] > GLcutoff) && ((league === "All") || (league === "1500"))) ? document.getElementById('GLlimit['+i+']').value/1:0*1;
        evoVals[i][8] = ((evoVals[i][5] > ULcutoff) && ((league === "All") || (league === "2500"))) ? document.getElementById('ULlimit['+i+']').value/1:0*1;
        evoVals[i][9] = ((evoVals[i][5] > MLcutoff) && ((league === "All") || (league ===   "ML"))) ? document.getElementById('MLlimit['+i+']').value/1:0*1;
      }
      console.log("buildSearchString: Finished building evoVals[]: "+JSON.stringify(evoVals));
      
      /* Ensure that we have at least one evolution checked (evoCB) https://stackoverflow.com/a/22938796 */
      const evoCBs = [...document.getElementsByClassName("evoCBs")]; /* add override to build base mon search strings for <500CP Leagues */
      if (evoCBs.filter(input => input.checked).length === 0) {
        console.error("buildSearchString: No evolutions selected, exiting...");
        document.getElementById('errorBox').innerHTML = "<p>ERROR: No Evo(s) selected! Please check at least one box above ("+monFamilyNames+") and try again.</p>";
        document.getElementById('output').value = "";
        return false;
      }
      
      /* output the user's request! */
      outputStr(evoVals, output, maxBattleLvl);
      
      /* update the URL with search parameters */
      updateURI(mon,evoVals.length);
      
      if (perfTiming) {stopTiming(T0, "buildSearchString");}
      return true;
    }
    
    function encodeSettings(evoLen)
    {
      /* build binary encodings of advanced and trash settings */
      var advancedBinary = "", trashBinary = "", rStr = "";
      var tempStr = [], i, j;
      var league = document.getElementById('league').value;
      
      if (league !== "Raid") {/*Skip all of this if making Raid mode URL*/
        for (i=1; ((i<10) && (i<evoLen+2)); i++) {
          if ((getComputedStyle(document.getElementById("evoLimits["+i+"]"), null).display === "inline-block") && (document.getElementById('evoCB['+i+']').checked)) {
            if (league === "All") {
              tempStr = [];
              if (getComputedStyle(document.getElementById("LLlimit["+i+"]"), null).display === "inline-block") {tempStr.push(document.getElementById("LLlimit["+i+"]").value/1);}
              if (getComputedStyle(document.getElementById("GLlimit["+i+"]"), null).display === "inline-block") {tempStr.push(document.getElementById("GLlimit["+i+"]").value/1);}
              if (getComputedStyle(document.getElementById("ULlimit["+i+"]"), null).display === "inline-block") {tempStr.push(document.getElementById("ULlimit["+i+"]").value/1);}
              if (getComputedStyle(document.getElementById("MLlimit["+i+"]"), null).display === "inline-block") {tempStr.push(document.getElementById("MLlimit["+i+"]").value/1);}
              if (tempStr.length > 0) {
                for (j=0; j<tempStr.length; j++) {
                  if (j===0) {rStr += "_"+tempStr[j];}
                  else {rStr += "-" + tempStr[j];}
                }
              } else {rStr += "_f";}
            } else {
              /* Determine which league limits are displayed, and save their limits to the URL */
              if (league === "500" && getComputedStyle(document.getElementById("LLlimit["+i+"]"), null).display === "inline-block") {
                rStr += "_" + document.getElementById("LLlimit["+i+"]").value/1;
              } else if (league === "1500" && getComputedStyle(document.getElementById("GLlimit["+i+"]"), null).display === "inline-block") {
                rStr += "_" + document.getElementById("GLlimit["+i+"]").value/1;
              } else if (league === "2500" && getComputedStyle(document.getElementById("ULlimit["+i+"]"), null).display === "inline-block") {
                rStr += "_" + document.getElementById("ULlimit["+i+"]").value/1;
              } else if (league === "ML" && getComputedStyle(document.getElementById("MLlimit["+i+"]"), null).display === "inline-block") {
                rStr += "_" + document.getElementById("MLlimit["+i+"]").value/1;
              }
            }
          } else {
            rStr += "_f";
          }
          if ((i==1) && (rStr.charAt(0)) === "_") {rStr = rStr.substring(1);} /* remove leading "_" */
        }
      }
      /*console.log("encodeSettings: rStr finished: "+rStr+" for league:"+league);*/
  
      trashBinary = document.getElementById('trash').checked ? "1" : "0";
      trashBinary += document.getElementById('excludeHundo').checked ? "1" : "0";
      trashBinary += document.getElementById('excludeZero').checked ? "1" : "0";
      trashBinary += document.getElementById('excludeXXL').checked ? "1" : "0";
      trashBinary += document.getElementById('excludeXXS').checked ? "1" : "0";
      trashBinary += document.getElementById('excludeXL').checked ? "1" : "0";
      trashBinary += document.getElementById('excludeXS').checked ? "1" : "0";
      trashBinary += document.getElementById('excludeTags').checked ? "1" : "0";
      trashBinary += document.getElementById('excludeFavs').checked ? "1" : "0";

      advancedBinary = document.getElementById('customIVs').checked ? "1" : "0";
      advancedBinary += document.getElementById('allZero').checked ? "1" : "0";
      advancedBinary += document.getElementById('noBadEvos').checked ? "1" : "0";
      advancedBinary += document.getElementById('fpRate').checked ? "1" : "0";
      
      return [trashBinary, advancedBinary, rStr];
    }
    
    function updateURI(mon,evoLen)
    {
      /* build binary encodings of settings for URL output */
      const [trashBinary, advancedBinary, rStr] = encodeSettings(evoLen);
      var league = document.getElementById('league').value;
      var leagueName = document.getElementById('league').options[document.getElementById('league').selectedIndex].innerHTML;
      var uri = window.location.href.split("?")[0];
      
      /* Add standard settings to uri */
      uri += "?mon="+mon+"&cp="+league+"&r="+rStr;
      
      /* Add any non-default values to uri */
      if (document.getElementById('trash').checked && trashBinary != "111000000") {uri +="&trash="+trashBinary;}
      if (advancedBinary != "0011") {uri +="&adv="+advancedBinary;}
      if (document.getElementById('customIVs').checked) {uri += "&IVentry="+document.getElementById('IVentry').value;}
      if (document.getElementById('maxBattleLvl').value != "51") {uri += "&m="+document.getElementById('maxBattleLvl').value;}
      if (document.getElementById('minSearchLvl').value != 1) {uri += "&slMin="+document.getElementById('minSearchLvl').value;}
      if (document.getElementById('maxSearchLvl').value != 30) {uri += "&slMax="+document.getElementById('maxSearchLvl').value;}
      if (document.getElementById('lang').value.split(',')[0] != "en") {uri += "&l="+document.getElementById('lang').value.split(',')[0];}
      if (league === "Raid") {
        uri += document.getElementById("ivLim").value != "" ? "&ivLim="+document.getElementById("ivLim").value/1:"";
        uri += document.getElementById("aLim").value != "" ? "&a="+document.getElementById("aLim").value/1:"";
        uri += document.getElementById("dLim").value != "" ? "&d="+document.getElementById("dLim").value/1:"";
        uri += document.getElementById("sLim").value != "" ? "&s="+document.getElementById("sLim").value/1:"";
        uri += document.getElementById("addIV").value != "" ? "&addIV="+document.getElementById("addIV").value:"";
        uri += document.getElementById("excludeIV").value != "" ? "&notIV="+document.getElementById("excludeIV").value:"";
      }   
      
      console.log("uri:"+uri);

      /* Update Page Title with User's Search */
      var newTitle;
      if (!mon) {
        newTitle = "PvP IVs - Zero 0% IV Search String";
      } else {
        newTitle = "PvP IVs - "+mon+" "+leagueName+" Search String";
      }
      document.title = newTitle;

      /* Update URL with search parameters */
      uri = encodeURI(uri);
      window.history.pushState(null, newTitle, uri);
      /* Update canonical link to include mon & league for improved SEO */
      document.querySelector("link[rel='canonical']").setAttribute("href", "https://pvpivs.com/searchStr.html?mon="+mon+"&cp="+league);
      return;
    }
    
    function findAllZeros() {
      var T0;
      if (true) {T0 = performance.now();}
      
      var output = document.getElementById('output');
      var lang = document.getElementById('lang').value.split(',');
      var message = "This string ignores PvP rankings, and only finds 0% IV (0/0/0) mon.<br />For PvP rankings please uncheck 'Find ALL 0% mon' (below)";
      
      /* Ensure search terms are translated as needed*/
      output.value = "0"+lang[LANG_ATK]+"&0"+lang[LANG_DEF]+"&0"+lang[LANG_HP];

      document.getElementById('outputSummaryBox').innerHTML = "<p>"+message+"</p>";
      if (perfTiming) {stopTiming(T0, "findAllZeros");}
      return;
    }
    
    function getRanks(evoVals, maxBattleLvl) {
      var T0;
      if (perfTiming) {T0 = performance.now();}
      
      var message = "String ", outRanks = 0, rKeys, e, i, j, l, leagueLim, leagueRanks, numLeagueRanks, leagueArray;
      var searchRanks = {};
      var league = document.getElementById('league').value;
      var slMin = document.getElementById('minSearchLvl').value/1;
      var slMax = document.getElementById('maxSearchLvl').value/1;

      for (e=0; e<evoVals.length; e++) {
        if (evoVals[e][0]){console.log("getRanks: Loop #"+e+": evoVals["+e+"]:"+JSON.stringify(evoVals[e]));}
        
        if (e == 0) {/* base mon */
          if (document.getElementById('trash').checked) {
            message += "trashes Level "+slMin+"-"+slMax+" "+evoVals[e][4]+" except ";
            if (document.getElementById('excludeHundo').checked) {message += "perfect IV (15/15/15) and ";}
            if (document.getElementById('excludeZero').checked) {message += "zero IV (0/0/0) and ";}
            if (document.getElementById('excludeXXL').checked) {message += "XXL and ";}
            if (document.getElementById('excludeXXS').checked) {message += "XXS and ";}
            if (document.getElementById('excludeXL').checked) {message += "XL and ";}
            if (document.getElementById('excludeXS').checked) {message += "XS and ";}
            if (document.getElementById('excludeTags').checked) {message += "Tagged and ";}
            if (document.getElementById('excludeFavs').checked) {message += "Favorited and ";}
          } else {message += "finds Level "+slMin+"-"+slMax+" "+evoVals[e][4]+" as ";}
        }
        else {/* evos */
          if (league === "All") {
            /* Add all formats to league, loop through all */
            leagueArray = ["500", "1500", "2500", "ML"].slice();
          } else {leagueArray = [league];} /* convert to array for loop */
          
          for (l=0; l<leagueArray.length; l++) {
            if (evoVals[e][0]) {
              /* Loop over for All Leagues, only runs once for single League strings */
              if (leagueArray[l] === "500") {leagueLim = evoVals[e][6]/1;}
              else if (leagueArray[l] === "1500") {leagueLim = evoVals[e][7]/1;}
              else if (leagueArray[l] === "2500") {leagueLim = evoVals[e][8]/1;}
              else {leagueLim = evoVals[e][9]/1;} /* Master League */
              
              if (leagueLim/1 > 0) {
                /* Only process for leagues which user wants more than 0 ranks for */
                leagueRanks = calculate(parseInt(evoVals[e][1]), parseInt(evoVals[e][2]), parseInt(evoVals[e][3]), document.getElementById('floor').value, 0, maxBattleLvl, false, leagueArray[l], evoVals[e][4]);
                rKeys = Object.keys(leagueRanks);
                for (numLeagueRanks=0,i=0; numLeagueRanks<leagueLim/1; i++) {
                  /* Ensure we iterate through ties as well */
                  for (j=0; j<leagueRanks[rKeys[i]].length && numLeagueRanks<leagueLim/1; j++) {
                    if (!searchRanks[rKeys[i]]) {searchRanks[rKeys[i]] = [];}
                    searchRanks[rKeys[i]][j] =  leagueRanks[rKeys[i]][j];
                    maxLvl = (leagueRanks[rKeys[i]][j].L/1-1)*2;
                    searchRanks[rKeys[i]][j].CP = Math.max(10, Math.floor((evoVals[0][1]/1 + leagueRanks[rKeys[i]][j].IVs.A/1) * Math.sqrt(evoVals[0][2]/1 + leagueRanks[rKeys[i]][j].IVs.D/1) * Math.sqrt(evoVals[0][3]/1 + leagueRanks[rKeys[i]][j].IVs.S/1) * cpm[maxLvl] * cpm[maxLvl] / 10));
                    numLeagueRanks++;
                  }
                }
                /*if (rKeys.length > 0) {console.log("getRanks: searchRanks updated to: "+JSON.stringify(searchRanks)+" for leagueLim:"+leagueLim+", leagueArray["+l+"]:"+leagueArray[l]);}*/
              
                /* Update the message with what we just calculated */
                /* TODO: Get rid of outRanks? */
                if (outRanks>0) {message += ", and ";}
                if (leagueArray[l] === "500") {message += "Top "+leagueLim+" "+evoVals[e][4]+ " for Little";}
                else if (leagueArray[l] === "1500") {message += "Top "+leagueLim+" "+evoVals[e][4]+ " for Great";}
                else if (leagueArray[l] === "2500") {message += "Top "+leagueLim+" "+evoVals[e][4]+ " for Ultra";}
                else {message += "Top "+leagueLim+" "+evoVals[e][4]+ " for Master";}
                outRanks += leagueLim/1;
              }
            }
            else {console.log("getRanks: default: skipping e="+e+": "+JSON.stringify(evoVals[e])+"...");}
          }
        }
      }
      
      /* Complete the message */
      if (league === "All") {
        message += " Leagues";
      } else {
        message += " League";
      }
      message += " up to PvP Level "+maxBattleLvl+".";
      
      document.getElementById('outputSummaryBox').innerHTML = "<p>"+message+"</p>";
      if (perfTiming) {stopTiming(T0, "getRanks");}
      return searchRanks;
    }
    
    /* Given valid family stats in evoVals, outputs a Search String for the user */
    function outputStr(evoVals, output, maxBattleLvl) {
      var T0;
      if (perfTiming) {T0 = performance.now();}
  
      /* create our single (merged) rank object (from All Leagues) to compute cps/hps from for output string */
      const mergedRanks = getRanks(evoVals, maxBattleLvl);
  
      output.value = ''; /* ensure old output is cleared */
      var cps = [], hps = [], cpHpPairs = [], aIV = [], dIV = [], sIV = [];
      var i, actualRank, j, k;
      cps[0] = new Set();
      hps[0] = new Set();
      cpHpPairs[0] = new Set();
      aIV[0] = new Set();
      dIV[0] = new Set();
      sIV[0] = new Set();
      cps[1] = new Set();
      hps[1] = new Set();
      cpHpPairs[1] = new Set();
      aIV[1] = new Set();
      dIV[1] = new Set();
      sIV[1] = new Set();
      cps[2] = new Set();
      hps[2] = new Set();
      cpHpPairs[2] = new Set();
      aIV[2] = new Set();
      dIV[2] = new Set();
      sIV[2] = new Set();
      cps[3] = new Set();
      hps[3] = new Set();
      cpHpPairs[3] = new Set();
      aIV[3] = new Set();
      dIV[3] = new Set();
      sIV[3] = new Set();
      cps[4] = new Set();
      hps[4] = new Set();
      cpHpPairs[4] = new Set();
      aIV[4] = new Set();
      dIV[4] = new Set();
      sIV[4] = new Set();
      var maxCP = new Array(5).fill(0), maxHP = new Array(5).fill(0);
      var slMin = document.getElementById('minSearchLvl').value/1;
      var slMax = document.getElementById('maxSearchLvl').value/1;
      var targetIVs = new Set();
      var hasZeroOneTwoThreeIVs = false;
      var hasWeatherBoostedLvl = false;
        
      /* generate all the cps and hps for matching */
      /* for first rank to the end of mergedRanks  */
      /* which contains user set cutoffs by league */
      /* up to maxSearchLvl/CP bounds set by user  */
      var rKeys = Object.keys(mergedRanks), lookupLvl;
      var limit = Object.values(mergedRanks).flat().length;
      for (i=0,actualRank=1; actualRank/1 <= limit/1; i++) {
        for (j=0; j<mergedRanks[rKeys[i]].length; j++) {
          
          var atk = mergedRanks[rKeys[i]][j].IVs.A;
          var def = mergedRanks[rKeys[i]][j].IVs.D;
          var sta = mergedRanks[rKeys[i]][j].IVs.S;
          targetIVs.add(atk+","+def+","+sta);
          var atkBkt = -1, defBkt = -1, hpBkt = -1;

          /* Check if we should notify user to include Weather Boosted IVs */
          if (!hasZeroOneTwoThreeIVs && slMax <= 30 && mergedRanks[rKeys[i]][j].L > 30) {
            if (hasWeatherBoostedLvl === false) {
              hasWeatherBoostedLvl = true;
            }
            if (mergedRanks[rKeys[i]][j].IVs.A/1 < 4 || mergedRanks[rKeys[i]][j].IVs.D/1 < 4 || mergedRanks[rKeys[i]][j].IVs.S/1 < 4)
            {
              hasZeroOneTwoThreeIVs = true;
              console.log("outputStr: One or more IVs below WB (4) of "+mergedRanks[rKeys[i]][j].IVs.A+"/"+mergedRanks[rKeys[i]][j].IVs.D+"/"+mergedRanks[rKeys[i]][j].IVs.S+", hasZeroOneTwoThreeIVs now:"+hasZeroOneTwoThreeIVs);
            }
          }
          
          /* Generate CPs and HPs to search for up to CP cutoff */
          for(k=slMin; k<slMax; k++) {
            lookupLvl = (k-1)*2;
            var cp = Math.max(10, Math.floor((evoVals[0][1]/1 + atk/1) * Math.sqrt(evoVals[0][2]/1 + def/1) * Math.sqrt(evoVals[0][3]/1 + sta/1) * cpm[lookupLvl] * cpm[lookupLvl] / 10));
            /* mergedRanks.CP updated in getRanks() to be base mon CP at final evo's max level */
            if (cp/1 > mergedRanks[rKeys[i]][j].CP/1) {
              /* Do not generate CPs beyond league limit */
              break;
            }
            /* generate hps for more accurate search string matching */
            var hp = Math.max(10, Math.floor((evoVals[0][3]/1 + sta) * cpm[lookupLvl]));
            /* generate IV buckets for more accurate search string matching */
            /* 0 is 0IV, 1 is 1-5IV, 2 is 6-10IV, 3 is 11-14IV, 4 is 15IV */
            if (atk/1==15) {atkBkt=4;} else {atkBkt=Math.ceil(atk/5);}
            if (def/1==15) {defBkt=4;} else {defBkt=Math.ceil(def/5);}
            if (sta/1==15) {hpBkt=4;} else {hpBkt=Math.ceil(sta/5);}
            
            /* bucket CPs and HPs into appraisal ratings for more accurrate matching */
            switch (mergedRanks[rKeys[i]][j].IVs.star) {
              case "0*":
                cps[0].add(cp);
                hps[0].add(hp);
                cpHpPairs[0].add(cp+","+hp);
                aIV[0].add(atkBkt);
                dIV[0].add(defBkt);
                sIV[0].add(hpBkt);
                if (maxCP[0] < cp) {maxCP[0] = cp;}
                if (maxHP[0] < hp) {maxHP[0] = hp;}
                break;
              case "1*":
                cps[1].add(cp);
                hps[1].add(hp);
                cpHpPairs[1].add(cp+","+hp);
                aIV[1].add(atkBkt);
                dIV[1].add(defBkt);
                sIV[1].add(hpBkt);
                if (maxCP[1] < cp) {maxCP[1] = cp;}
                if (maxHP[1] < hp) {maxHP[1] = hp;}
                break;
              case "2*":
                cps[2].add(cp);
                hps[2].add(hp);
                cpHpPairs[2].add(cp+","+hp);
                aIV[2].add(atkBkt);
                dIV[2].add(defBkt);
                sIV[2].add(hpBkt);
                if (maxCP[2] < cp) {maxCP[2] = cp;}
                if (maxHP[2] < hp) {maxHP[2] = hp;}
                break;
              case "3*":
                cps[3].add(cp);
                hps[3].add(hp);
                cpHpPairs[3].add(cp+","+hp);
                aIV[3].add(atkBkt);
                dIV[3].add(defBkt);
                sIV[3].add(hpBkt);
                if (maxCP[3] < cp) {maxCP[3] = cp;}
                if (maxHP[3] < hp) {maxHP[3] = hp;}
                break;
              case "4*":
                cps[4].add(cp);
                hps[4].add(hp);
                cpHpPairs[4].add(cp+","+hp);
                aIV[4].add(atkBkt);
                dIV[4].add(defBkt);
                sIV[4].add(hpBkt);
                if (maxCP[4] < cp) {maxCP[4] = cp;}
                if (maxHP[4] < hp) {maxHP[4] = hp;}
                break;
            }
          }
          actualRank = actualRank + 1;
        }
      }
      
      if (!hasZeroOneTwoThreeIVs && hasWeatherBoostedLvl && document.getElementById('league').value !== "All") {
        var searchLvlName = document.getElementById('maxSearchLvl').options[document.getElementById('maxSearchLvl').selectedIndex].text;
        var leagueName = document.getElementById('league').options[document.getElementById('league').selectedIndex].innerHTML;
        var baseMonName = evoVals[0][4];
        var finalMonName;
        
        for (i=1;i<evoVals.length; i++) {
          if (evoVals[i][0]) { /* Check if this entry is not false */
            finalMonName = evoVals[i][4];
            break;
          }
        }
        console.log("outputStr: Need to warn user to search for WB levels");
        console.log("outputStr: evoVals:"+JSON.stringify(evoVals));
        document.getElementById("feedbackBox").innerHTML += "<p><i>WARNING: Your search string finds only Weather Boosted IVs and "+finalMonName+" needs to be powered up beyond Level 30 for "+leagueName+" but your string only finds up to Level "+searchLvlName+". Instead, consider including Weather Boosted Levels (31-35) to not miss out on "+baseMonName+" with potentially good PvP IVs!</i></p>";
        /* TODO: Have self-referential link with WB IVs in message */
      }
        
      /* output the CPs and HPs */
      outputCPsHPsBuckets(cps.slice(), maxCP, hps.slice(), maxHP, aIV, dIV, sIV, output, evoVals[0][0]);
      var origOut = output.value;

      /* Calculate and show False Postive Rate to user */
      if (document.getElementById('fpRate').checked == true) {
        falsePositiveRate(evoVals[0][1]/1, evoVals[0][2]/1, evoVals[0][3]/1, slMin, slMax, targetIVs, cpHpPairs.slice(), aIV, dIV, sIV);
      }
      
      if (origOut.length > 2000) { /* Check and split output length into <2000 char chunks at commas for iOS users */
        let excessOut = output.value.substring(0); /* ensure we don't mutilate actual output */
        let div = document.getElementById("overflowArea"); /* div where overflows are created */
        div.innerHTML = "<i style='font-size:0.6em'>&lt;2000 character strings for iOS Text Replacement compatibility:</i><br />";
        for (i=1;excessOut.length>0;i++) {
          let newOverflow = document.createElement("textarea");
          newOverflow.id = "overflow"+i; newOverflow.rows=1; newOverflow.style="width: 50%; height: 50%;"; newOverflow.setAttribute('onclick', "autocopy(this)"); div.appendChild(newOverflow);
          let cut = excessOut.slice(0, 2001).lastIndexOf(",")+1; /*correct for 0 index with + 1*/
          document.getElementById("overflow"+i).value = (excessOut.length>2000) ? excessOut.slice(0, cut) : excessOut;
          console.log("outputStr: TotalLen:"+origOut.length+", cut:"+cut+", excessOut.length:"+excessOut.length);
          excessOut = (excessOut.length>2000) ? excessOut.substring(cut) : 0;
        }
      }
      if (perfTiming) {stopTiming(T0, "outputStr");}
      return output;
    }

    function falsePositiveRate(baseAtk, baseDef, baseSta, minSearchLvl, maxSearchLvl, targetIVs, cpHpPairs, atkBkts, defBkts, staBkts) {
      /* TODO: Speed up this function, or at least allow user to disable it */
      var T0, possibleIVs = new Set(), oldStartLvl;
      if (perfTiming) {T0 = performance.now();}
      
      /*console.log("falsePositiveRate: received baseAtk:"+baseAtk+", baseDef:"+baseDef+", baseSta:"+baseSta+", minSearchLvl:"+minSearchLvl+", maxSearchLvl:"+maxSearchLvl+", targetIVs:"+targetIVs+", cpHpPairs:"+cpHpPairs+", atkBkts:"+atkBkts+", defBkts:"+defBkts+", staBkts:"+staBkts);*/

      /* Contains all 4096 possible IVs spit out by Appraisal Buckets to simplify and speed up function */
      var IVsByStar = 
      [
      /* 0* */[[0,0,0],[0,0,1],[0,0,2],[0,0,3],[0,0,4],[0,0,5],[0,0,6],[0,0,7],[0,0,8],[0,0,9],[0,0,10],[0,0,11],[0,0,12],[0,0,13],[0,0,14],[0,0,15],[0,1,0],[0,1,1],[0,1,2],[0,1,3],[0,1,4],[0,1,5],[0,1,6],[0,1,7],[0,1,8],[0,1,9],[0,1,10],[0,1,11],[0,1,12],[0,1,13],[0,1,14],[0,1,15],[0,2,0],[0,2,1],[0,2,2],[0,2,3],[0,2,4],[0,2,5],[0,2,6],[0,2,7],[0,2,8],[0,2,9],[0,2,10],[0,2,11],[0,2,12],[0,2,13],[0,2,14],[0,2,15],[0,3,0],[0,3,1],[0,3,2],[0,3,3],[0,3,4],[0,3,5],[0,3,6],[0,3,7],[0,3,8],[0,3,9],[0,3,10],[0,3,11],[0,3,12],[0,3,13],[0,3,14],[0,3,15],[0,4,0],[0,4,1],[0,4,2],[0,4,3],[0,4,4],[0,4,5],[0,4,6],[0,4,7],[0,4,8],[0,4,9],[0,4,10],[0,4,11],[0,4,12],[0,4,13],[0,4,14],[0,4,15],[0,5,0],[0,5,1],[0,5,2],[0,5,3],[0,5,4],[0,5,5],[0,5,6],[0,5,7],[0,5,8],[0,5,9],[0,5,10],[0,5,11],[0,5,12],[0,5,13],[0,5,14],[0,5,15],[0,6,0],[0,6,1],[0,6,2],[0,6,3],[0,6,4],[0,6,5],[0,6,6],[0,6,7],[0,6,8],[0,6,9],[0,6,10],[0,6,11],[0,6,12],[0,6,13],[0,6,14],[0,6,15],[0,7,0],[0,7,1],[0,7,2],[0,7,3],[0,7,4],[0,7,5],[0,7,6],[0,7,7],[0,7,8],[0,7,9],[0,7,10],[0,7,11],[0,7,12],[0,7,13],[0,7,14],[0,7,15],[0,8,0],[0,8,1],[0,8,2],[0,8,3],[0,8,4],[0,8,5],[0,8,6],[0,8,7],[0,8,8],[0,8,9],[0,8,10],[0,8,11],[0,8,12],[0,8,13],[0,8,14],[0,9,0],[0,9,1],[0,9,2],[0,9,3],[0,9,4],[0,9,5],[0,9,6],[0,9,7],[0,9,8],[0,9,9],[0,9,10],[0,9,11],[0,9,12],[0,9,13],[0,10,0],[0,10,1],[0,10,2],[0,10,3],[0,10,4],[0,10,5],[0,10,6],[0,10,7],[0,10,8],[0,10,9],[0,10,10],[0,10,11],[0,10,12],[0,11,0],[0,11,1],[0,11,2],[0,11,3],[0,11,4],[0,11,5],[0,11,6],[0,11,7],[0,11,8],[0,11,9],[0,11,10],[0,11,11],[0,12,0],[0,12,1],[0,12,2],[0,12,3],[0,12,4],[0,12,5],[0,12,6],[0,12,7],[0,12,8],[0,12,9],[0,12,10],[0,13,0],[0,13,1],[0,13,2],[0,13,3],[0,13,4],[0,13,5],[0,13,6],[0,13,7],[0,13,8],[0,13,9],[0,14,0],[0,14,1],[0,14,2],[0,14,3],[0,14,4],[0,14,5],[0,14,6],[0,14,7],[0,14,8],[0,15,0],[0,15,1],[0,15,2],[0,15,3],[0,15,4],[0,15,5],[0,15,6],[0,15,7],[1,0,0],[1,0,1],[1,0,2],[1,0,3],[1,0,4],[1,0,5],[1,0,6],[1,0,7],[1,0,8],[1,0,9],[1,0,10],[1,0,11],[1,0,12],[1,0,13],[1,0,14],[1,0,15],[1,1,0],[1,1,1],[1,1,2],[1,1,3],[1,1,4],[1,1,5],[1,1,6],[1,1,7],[1,1,8],[1,1,9],[1,1,10],[1,1,11],[1,1,12],[1,1,13],[1,1,14],[1,1,15],[1,2,0],[1,2,1],[1,2,2],[1,2,3],[1,2,4],[1,2,5],[1,2,6],[1,2,7],[1,2,8],[1,2,9],[1,2,10],[1,2,11],[1,2,12],[1,2,13],[1,2,14],[1,2,15],[1,3,0],[1,3,1],[1,3,2],[1,3,3],[1,3,4],[1,3,5],[1,3,6],[1,3,7],[1,3,8],[1,3,9],[1,3,10],[1,3,11],[1,3,12],[1,3,13],[1,3,14],[1,3,15],[1,4,0],[1,4,1],[1,4,2],[1,4,3],[1,4,4],[1,4,5],[1,4,6],[1,4,7],[1,4,8],[1,4,9],[1,4,10],[1,4,11],[1,4,12],[1,4,13],[1,4,14],[1,4,15],[1,5,0],[1,5,1],[1,5,2],[1,5,3],[1,5,4],[1,5,5],[1,5,6],[1,5,7],[1,5,8],[1,5,9],[1,5,10],[1,5,11],[1,5,12],[1,5,13],[1,5,14],[1,5,15],[1,6,0],[1,6,1],[1,6,2],[1,6,3],[1,6,4],[1,6,5],[1,6,6],[1,6,7],[1,6,8],[1,6,9],[1,6,10],[1,6,11],[1,6,12],[1,6,13],[1,6,14],[1,6,15],[1,7,0],[1,7,1],[1,7,2],[1,7,3],[1,7,4],[1,7,5],[1,7,6],[1,7,7],[1,7,8],[1,7,9],[1,7,10],[1,7,11],[1,7,12],[1,7,13],[1,7,14],[1,8,0],[1,8,1],[1,8,2],[1,8,3],[1,8,4],[1,8,5],[1,8,6],[1,8,7],[1,8,8],[1,8,9],[1,8,10],[1,8,11],[1,8,12],[1,8,13],[1,9,0],[1,9,1],[1,9,2],[1,9,3],[1,9,4],[1,9,5],[1,9,6],[1,9,7],[1,9,8],[1,9,9],[1,9,10],[1,9,11],[1,9,12],[1,10,0],[1,10,1],[1,10,2],[1,10,3],[1,10,4],[1,10,5],[1,10,6],[1,10,7],[1,10,8],[1,10,9],[1,10,10],[1,10,11],[1,11,0],[1,11,1],[1,11,2],[1,11,3],[1,11,4],[1,11,5],[1,11,6],[1,11,7],[1,11,8],[1,11,9],[1,11,10],[1,12,0],[1,12,1],[1,12,2],[1,12,3],[1,12,4],[1,12,5],[1,12,6],[1,12,7],[1,12,8],[1,12,9],[1,13,0],[1,13,1],[1,13,2],[1,13,3],[1,13,4],[1,13,5],[1,13,6],[1,13,7],[1,13,8],[1,14,0],[1,14,1],[1,14,2],[1,14,3],[1,14,4],[1,14,5],[1,14,6],[1,14,7],[1,15,0],[1,15,1],[1,15,2],[1,15,3],[1,15,4],[1,15,5],[1,15,6],[2,0,0],[2,0,1],[2,0,2],[2,0,3],[2,0,4],[2,0,5],[2,0,6],[2,0,7],[2,0,8],[2,0,9],[2,0,10],[2,0,11],[2,0,12],[2,0,13],[2,0,14],[2,0,15],[2,1,0],[2,1,1],[2,1,2],[2,1,3],[2,1,4],[2,1,5],[2,1,6],[2,1,7],[2,1,8],[2,1,9],[2,1,10],[2,1,11],[2,1,12],[2,1,13],[2,1,14],[2,1,15],[2,2,0],[2,2,1],[2,2,2],[2,2,3],[2,2,4],[2,2,5],[2,2,6],[2,2,7],[2,2,8],[2,2,9],[2,2,10],[2,2,11],[2,2,12],[2,2,13],[2,2,14],[2,2,15],[2,3,0],[2,3,1],[2,3,2],[2,3,3],[2,3,4],[2,3,5],[2,3,6],[2,3,7],[2,3,8],[2,3,9],[2,3,10],[2,3,11],[2,3,12],[2,3,13],[2,3,14],[2,3,15],[2,4,0],[2,4,1],[2,4,2],[2,4,3],[2,4,4],[2,4,5],[2,4,6],[2,4,7],[2,4,8],[2,4,9],[2,4,10],[2,4,11],[2,4,12],[2,4,13],[2,4,14],[2,4,15],[2,5,0],[2,5,1],[2,5,2],[2,5,3],[2,5,4],[2,5,5],[2,5,6],[2,5,7],[2,5,8],[2,5,9],[2,5,10],[2,5,11],[2,5,12],[2,5,13],[2,5,14],[2,5,15],[2,6,0],[2,6,1],[2,6,2],[2,6,3],[2,6,4],[2,6,5],[2,6,6],[2,6,7],[2,6,8],[2,6,9],[2,6,10],[2,6,11],[2,6,12],[2,6,13],[2,6,14],[2,7,0],[2,7,1],[2,7,2],[2,7,3],[2,7,4],[2,7,5],[2,7,6],[2,7,7],[2,7,8],[2,7,9],[2,7,10],[2,7,11],[2,7,12],[2,7,13],[2,8,0],[2,8,1],[2,8,2],[2,8,3],[2,8,4],[2,8,5],[2,8,6],[2,8,7],[2,8,8],[2,8,9],[2,8,10],[2,8,11],[2,8,12],[2,9,0],[2,9,1],[2,9,2],[2,9,3],[2,9,4],[2,9,5],[2,9,6],[2,9,7],[2,9,8],[2,9,9],[2,9,10],[2,9,11],[2,10,0],[2,10,1],[2,10,2],[2,10,3],[2,10,4],[2,10,5],[2,10,6],[2,10,7],[2,10,8],[2,10,9],[2,10,10],[2,11,0],[2,11,1],[2,11,2],[2,11,3],[2,11,4],[2,11,5],[2,11,6],[2,11,7],[2,11,8],[2,11,9],[2,12,0],[2,12,1],[2,12,2],[2,12,3],[2,12,4],[2,12,5],[2,12,6],[2,12,7],[2,12,8],[2,13,0],[2,13,1],[2,13,2],[2,13,3],[2,13,4],[2,13,5],[2,13,6],[2,13,7],[2,14,0],[2,14,1],[2,14,2],[2,14,3],[2,14,4],[2,14,5],[2,14,6],[2,15,0],[2,15,1],[2,15,2],[2,15,3],[2,15,4],[2,15,5],[3,0,0],[3,0,1],[3,0,2],[3,0,3],[3,0,4],[3,0,5],[3,0,6],[3,0,7],[3,0,8],[3,0,9],[3,0,10],[3,0,11],[3,0,12],[3,0,13],[3,0,14],[3,0,15],[3,1,0],[3,1,1],[3,1,2],[3,1,3],[3,1,4],[3,1,5],[3,1,6],[3,1,7],[3,1,8],[3,1,9],[3,1,10],[3,1,11],[3,1,12],[3,1,13],[3,1,14],[3,1,15],[3,2,0],[3,2,1],[3,2,2],[3,2,3],[3,2,4],[3,2,5],[3,2,6],[3,2,7],[3,2,8],[3,2,9],[3,2,10],[3,2,11],[3,2,12],[3,2,13],[3,2,14],[3,2,15],[3,3,0],[3,3,1],[3,3,2],[3,3,3],[3,3,4],[3,3,5],[3,3,6],[3,3,7],[3,3,8],[3,3,9],[3,3,10],[3,3,11],[3,3,12],[3,3,13],[3,3,14],[3,3,15],[3,4,0],[3,4,1],[3,4,2],[3,4,3],[3,4,4],[3,4,5],[3,4,6],[3,4,7],[3,4,8],[3,4,9],[3,4,10],[3,4,11],[3,4,12],[3,4,13],[3,4,14],[3,4,15],[3,5,0],[3,5,1],[3,5,2],[3,5,3],[3,5,4],[3,5,5],[3,5,6],[3,5,7],[3,5,8],[3,5,9],[3,5,10],[3,5,11],[3,5,12],[3,5,13],[3,5,14],[3,6,0],[3,6,1],[3,6,2],[3,6,3],[3,6,4],[3,6,5],[3,6,6],[3,6,7],[3,6,8],[3,6,9],[3,6,10],[3,6,11],[3,6,12],[3,6,13],[3,7,0],[3,7,1],[3,7,2],[3,7,3],[3,7,4],[3,7,5],[3,7,6],[3,7,7],[3,7,8],[3,7,9],[3,7,10],[3,7,11],[3,7,12],[3,8,0],[3,8,1],[3,8,2],[3,8,3],[3,8,4],[3,8,5],[3,8,6],[3,8,7],[3,8,8],[3,8,9],[3,8,10],[3,8,11],[3,9,0],[3,9,1],[3,9,2],[3,9,3],[3,9,4],[3,9,5],[3,9,6],[3,9,7],[3,9,8],[3,9,9],[3,9,10],[3,10,0],[3,10,1],[3,10,2],[3,10,3],[3,10,4],[3,10,5],[3,10,6],[3,10,7],[3,10,8],[3,10,9],[3,11,0],[3,11,1],[3,11,2],[3,11,3],[3,11,4],[3,11,5],[3,11,6],[3,11,7],[3,11,8],[3,12,0],[3,12,1],[3,12,2],[3,12,3],[3,12,4],[3,12,5],[3,12,6],[3,12,7],[3,13,0],[3,13,1],[3,13,2],[3,13,3],[3,13,4],[3,13,5],[3,13,6],[3,14,0],[3,14,1],[3,14,2],[3,14,3],[3,14,4],[3,14,5],[3,15,0],[3,15,1],[3,15,2],[3,15,3],[3,15,4],[4,0,0],[4,0,1],[4,0,2],[4,0,3],[4,0,4],[4,0,5],[4,0,6],[4,0,7],[4,0,8],[4,0,9],[4,0,10],[4,0,11],[4,0,12],[4,0,13],[4,0,14],[4,0,15],[4,1,0],[4,1,1],[4,1,2],[4,1,3],[4,1,4],[4,1,5],[4,1,6],[4,1,7],[4,1,8],[4,1,9],[4,1,10],[4,1,11],[4,1,12],[4,1,13],[4,1,14],[4,1,15],[4,2,0],[4,2,1],[4,2,2],[4,2,3],[4,2,4],[4,2,5],[4,2,6],[4,2,7],[4,2,8],[4,2,9],[4,2,10],[4,2,11],[4,2,12],[4,2,13],[4,2,14],[4,2,15],[4,3,0],[4,3,1],[4,3,2],[4,3,3],[4,3,4],[4,3,5],[4,3,6],[4,3,7],[4,3,8],[4,3,9],[4,3,10],[4,3,11],[4,3,12],[4,3,13],[4,3,14],[4,3,15],[4,4,0],[4,4,1],[4,4,2],[4,4,3],[4,4,4],[4,4,5],[4,4,6],[4,4,7],[4,4,8],[4,4,9],[4,4,10],[4,4,11],[4,4,12],[4,4,13],[4,4,14],[4,5,0],[4,5,1],[4,5,2],[4,5,3],[4,5,4],[4,5,5],[4,5,6],[4,5,7],[4,5,8],[4,5,9],[4,5,10],[4,5,11],[4,5,12],[4,5,13],[4,6,0],[4,6,1],[4,6,2],[4,6,3],[4,6,4],[4,6,5],[4,6,6],[4,6,7],[4,6,8],[4,6,9],[4,6,10],[4,6,11],[4,6,12],[4,7,0],[4,7,1],[4,7,2],[4,7,3],[4,7,4],[4,7,5],[4,7,6],[4,7,7],[4,7,8],[4,7,9],[4,7,10],[4,7,11],[4,8,0],[4,8,1],[4,8,2],[4,8,3],[4,8,4],[4,8,5],[4,8,6],[4,8,7],[4,8,8],[4,8,9],[4,8,10],[4,9,0],[4,9,1],[4,9,2],[4,9,3],[4,9,4],[4,9,5],[4,9,6],[4,9,7],[4,9,8],[4,9,9],[4,10,0],[4,10,1],[4,10,2],[4,10,3],[4,10,4],[4,10,5],[4,10,6],[4,10,7],[4,10,8],[4,11,0],[4,11,1],[4,11,2],[4,11,3],[4,11,4],[4,11,5],[4,11,6],[4,11,7],[4,12,0],[4,12,1],[4,12,2],[4,12,3],[4,12,4],[4,12,5],[4,12,6],[4,13,0],[4,13,1],[4,13,2],[4,13,3],[4,13,4],[4,13,5],[4,14,0],[4,14,1],[4,14,2],[4,14,3],[4,14,4],[4,15,0],[4,15,1],[4,15,2],[4,15,3],[5,0,0],[5,0,1],[5,0,2],[5,0,3],[5,0,4],[5,0,5],[5,0,6],[5,0,7],[5,0,8],[5,0,9],[5,0,10],[5,0,11],[5,0,12],[5,0,13],[5,0,14],[5,0,15],[5,1,0],[5,1,1],[5,1,2],[5,1,3],[5,1,4],[5,1,5],[5,1,6],[5,1,7],[5,1,8],[5,1,9],[5,1,10],[5,1,11],[5,1,12],[5,1,13],[5,1,14],[5,1,15],[5,2,0],[5,2,1],[5,2,2],[5,2,3],[5,2,4],[5,2,5],[5,2,6],[5,2,7],[5,2,8],[5,2,9],[5,2,10],[5,2,11],[5,2,12],[5,2,13],[5,2,14],[5,2,15],[5,3,0],[5,3,1],[5,3,2],[5,3,3],[5,3,4],[5,3,5],[5,3,6],[5,3,7],[5,3,8],[5,3,9],[5,3,10],[5,3,11],[5,3,12],[5,3,13],[5,3,14],[5,4,0],[5,4,1],[5,4,2],[5,4,3],[5,4,4],[5,4,5],[5,4,6],[5,4,7],[5,4,8],[5,4,9],[5,4,10],[5,4,11],[5,4,12],[5,4,13],[5,5,0],[5,5,1],[5,5,2],[5,5,3],[5,5,4],[5,5,5],[5,5,6],[5,5,7],[5,5,8],[5,5,9],[5,5,10],[5,5,11],[5,5,12],[5,6,0],[5,6,1],[5,6,2],[5,6,3],[5,6,4],[5,6,5],[5,6,6],[5,6,7],[5,6,8],[5,6,9],[5,6,10],[5,6,11],[5,7,0],[5,7,1],[5,7,2],[5,7,3],[5,7,4],[5,7,5],[5,7,6],[5,7,7],[5,7,8],[5,7,9],[5,7,10],[5,8,0],[5,8,1],[5,8,2],[5,8,3],[5,8,4],[5,8,5],[5,8,6],[5,8,7],[5,8,8],[5,8,9],[5,9,0],[5,9,1],[5,9,2],[5,9,3],[5,9,4],[5,9,5],[5,9,6],[5,9,7],[5,9,8],[5,10,0],[5,10,1],[5,10,2],[5,10,3],[5,10,4],[5,10,5],[5,10,6],[5,10,7],[5,11,0],[5,11,1],[5,11,2],[5,11,3],[5,11,4],[5,11,5],[5,11,6],[5,12,0],[5,12,1],[5,12,2],[5,12,3],[5,12,4],[5,12,5],[5,13,0],[5,13,1],[5,13,2],[5,13,3],[5,13,4],[5,14,0],[5,14,1],[5,14,2],[5,14,3],[5,15,0],[5,15,1],[5,15,2],[6,0,0],[6,0,1],[6,0,2],[6,0,3],[6,0,4],[6,0,5],[6,0,6],[6,0,7],[6,0,8],[6,0,9],[6,0,10],[6,0,11],[6,0,12],[6,0,13],[6,0,14],[6,0,15],[6,1,0],[6,1,1],[6,1,2],[6,1,3],[6,1,4],[6,1,5],[6,1,6],[6,1,7],[6,1,8],[6,1,9],[6,1,10],[6,1,11],[6,1,12],[6,1,13],[6,1,14],[6,1,15],[6,2,0],[6,2,1],[6,2,2],[6,2,3],[6,2,4],[6,2,5],[6,2,6],[6,2,7],[6,2,8],[6,2,9],[6,2,10],[6,2,11],[6,2,12],[6,2,13],[6,2,14],[6,3,0],[6,3,1],[6,3,2],[6,3,3],[6,3,4],[6,3,5],[6,3,6],[6,3,7],[6,3,8],[6,3,9],[6,3,10],[6,3,11],[6,3,12],[6,3,13],[6,4,0],[6,4,1],[6,4,2],[6,4,3],[6,4,4],[6,4,5],[6,4,6],[6,4,7],[6,4,8],[6,4,9],[6,4,10],[6,4,11],[6,4,12],[6,5,0],[6,5,1],[6,5,2],[6,5,3],[6,5,4],[6,5,5],[6,5,6],[6,5,7],[6,5,8],[6,5,9],[6,5,10],[6,5,11],[6,6,0],[6,6,1],[6,6,2],[6,6,3],[6,6,4],[6,6,5],[6,6,6],[6,6,7],[6,6,8],[6,6,9],[6,6,10],[6,7,0],[6,7,1],[6,7,2],[6,7,3],[6,7,4],[6,7,5],[6,7,6],[6,7,7],[6,7,8],[6,7,9],[6,8,0],[6,8,1],[6,8,2],[6,8,3],[6,8,4],[6,8,5],[6,8,6],[6,8,7],[6,8,8],[6,9,0],[6,9,1],[6,9,2],[6,9,3],[6,9,4],[6,9,5],[6,9,6],[6,9,7],[6,10,0],[6,10,1],[6,10,2],[6,10,3],[6,10,4],[6,10,5],[6,10,6],[6,11,0],[6,11,1],[6,11,2],[6,11,3],[6,11,4],[6,11,5],[6,12,0],[6,12,1],[6,12,2],[6,12,3],[6,12,4],[6,13,0],[6,13,1],[6,13,2],[6,13,3],[6,14,0],[6,14,1],[6,14,2],[6,15,0],[6,15,1],[7,0,0],[7,0,1],[7,0,2],[7,0,3],[7,0,4],[7,0,5],[7,0,6],[7,0,7],[7,0,8],[7,0,9],[7,0,10],[7,0,11],[7,0,12],[7,0,13],[7,0,14],[7,0,15],[7,1,0],[7,1,1],[7,1,2],[7,1,3],[7,1,4],[7,1,5],[7,1,6],[7,1,7],[7,1,8],[7,1,9],[7,1,10],[7,1,11],[7,1,12],[7,1,13],[7,1,14],[7,2,0],[7,2,1],[7,2,2],[7,2,3],[7,2,4],[7,2,5],[7,2,6],[7,2,7],[7,2,8],[7,2,9],[7,2,10],[7,2,11],[7,2,12],[7,2,13],[7,3,0],[7,3,1],[7,3,2],[7,3,3],[7,3,4],[7,3,5],[7,3,6],[7,3,7],[7,3,8],[7,3,9],[7,3,10],[7,3,11],[7,3,12],[7,4,0],[7,4,1],[7,4,2],[7,4,3],[7,4,4],[7,4,5],[7,4,6],[7,4,7],[7,4,8],[7,4,9],[7,4,10],[7,4,11],[7,5,0],[7,5,1],[7,5,2],[7,5,3],[7,5,4],[7,5,5],[7,5,6],[7,5,7],[7,5,8],[7,5,9],[7,5,10],[7,6,0],[7,6,1],[7,6,2],[7,6,3],[7,6,4],[7,6,5],[7,6,6],[7,6,7],[7,6,8],[7,6,9],[7,7,0],[7,7,1],[7,7,2],[7,7,3],[7,7,4],[7,7,5],[7,7,6],[7,7,7],[7,7,8],[7,8,0],[7,8,1],[7,8,2],[7,8,3],[7,8,4],[7,8,5],[7,8,6],[7,8,7],[7,9,0],[7,9,1],[7,9,2],[7,9,3],[7,9,4],[7,9,5],[7,9,6],[7,10,0],[7,10,1],[7,10,2],[7,10,3],[7,10,4],[7,10,5],[7,11,0],[7,11,1],[7,11,2],[7,11,3],[7,11,4],[7,12,0],[7,12,1],[7,12,2],[7,12,3],[7,13,0],[7,13,1],[7,13,2],[7,14,0],[7,14,1],[7,15,0],[8,0,0],[8,0,1],[8,0,2],[8,0,3],[8,0,4],[8,0,5],[8,0,6],[8,0,7],[8,0,8],[8,0,9],[8,0,10],[8,0,11],[8,0,12],[8,0,13],[8,0,14],[8,1,0],[8,1,1],[8,1,2],[8,1,3],[8,1,4],[8,1,5],[8,1,6],[8,1,7],[8,1,8],[8,1,9],[8,1,10],[8,1,11],[8,1,12],[8,1,13],[8,2,0],[8,2,1],[8,2,2],[8,2,3],[8,2,4],[8,2,5],[8,2,6],[8,2,7],[8,2,8],[8,2,9],[8,2,10],[8,2,11],[8,2,12],[8,3,0],[8,3,1],[8,3,2],[8,3,3],[8,3,4],[8,3,5],[8,3,6],[8,3,7],[8,3,8],[8,3,9],[8,3,10],[8,3,11],[8,4,0],[8,4,1],[8,4,2],[8,4,3],[8,4,4],[8,4,5],[8,4,6],[8,4,7],[8,4,8],[8,4,9],[8,4,10],[8,5,0],[8,5,1],[8,5,2],[8,5,3],[8,5,4],[8,5,5],[8,5,6],[8,5,7],[8,5,8],[8,5,9],[8,6,0],[8,6,1],[8,6,2],[8,6,3],[8,6,4],[8,6,5],[8,6,6],[8,6,7],[8,6,8],[8,7,0],[8,7,1],[8,7,2],[8,7,3],[8,7,4],[8,7,5],[8,7,6],[8,7,7],[8,8,0],[8,8,1],[8,8,2],[8,8,3],[8,8,4],[8,8,5],[8,8,6],[8,9,0],[8,9,1],[8,9,2],[8,9,3],[8,9,4],[8,9,5],[8,10,0],[8,10,1],[8,10,2],[8,10,3],[8,10,4],[8,11,0],[8,11,1],[8,11,2],[8,11,3],[8,12,0],[8,12,1],[8,12,2],[8,13,0],[8,13,1],[8,14,0],[9,0,0],[9,0,1],[9,0,2],[9,0,3],[9,0,4],[9,0,5],[9,0,6],[9,0,7],[9,0,8],[9,0,9],[9,0,10],[9,0,11],[9,0,12],[9,0,13],[9,1,0],[9,1,1],[9,1,2],[9,1,3],[9,1,4],[9,1,5],[9,1,6],[9,1,7],[9,1,8],[9,1,9],[9,1,10],[9,1,11],[9,1,12],[9,2,0],[9,2,1],[9,2,2],[9,2,3],[9,2,4],[9,2,5],[9,2,6],[9,2,7],[9,2,8],[9,2,9],[9,2,10],[9,2,11],[9,3,0],[9,3,1],[9,3,2],[9,3,3],[9,3,4],[9,3,5],[9,3,6],[9,3,7],[9,3,8],[9,3,9],[9,3,10],[9,4,0],[9,4,1],[9,4,2],[9,4,3],[9,4,4],[9,4,5],[9,4,6],[9,4,7],[9,4,8],[9,4,9],[9,5,0],[9,5,1],[9,5,2],[9,5,3],[9,5,4],[9,5,5],[9,5,6],[9,5,7],[9,5,8],[9,6,0],[9,6,1],[9,6,2],[9,6,3],[9,6,4],[9,6,5],[9,6,6],[9,6,7],[9,7,0],[9,7,1],[9,7,2],[9,7,3],[9,7,4],[9,7,5],[9,7,6],[9,8,0],[9,8,1],[9,8,2],[9,8,3],[9,8,4],[9,8,5],[9,9,0],[9,9,1],[9,9,2],[9,9,3],[9,9,4],[9,10,0],[9,10,1],[9,10,2],[9,10,3],[9,11,0],[9,11,1],[9,11,2],[9,12,0],[9,12,1],[9,13,0],[10,0,0],[10,0,1],[10,0,2],[10,0,3],[10,0,4],[10,0,5],[10,0,6],[10,0,7],[10,0,8],[10,0,9],[10,0,10],[10,0,11],[10,0,12],[10,1,0],[10,1,1],[10,1,2],[10,1,3],[10,1,4],[10,1,5],[10,1,6],[10,1,7],[10,1,8],[10,1,9],[10,1,10],[10,1,11],[10,2,0],[10,2,1],[10,2,2],[10,2,3],[10,2,4],[10,2,5],[10,2,6],[10,2,7],[10,2,8],[10,2,9],[10,2,10],[10,3,0],[10,3,1],[10,3,2],[10,3,3],[10,3,4],[10,3,5],[10,3,6],[10,3,7],[10,3,8],[10,3,9],[10,4,0],[10,4,1],[10,4,2],[10,4,3],[10,4,4],[10,4,5],[10,4,6],[10,4,7],[10,4,8],[10,5,0],[10,5,1],[10,5,2],[10,5,3],[10,5,4],[10,5,5],[10,5,6],[10,5,7],[10,6,0],[10,6,1],[10,6,2],[10,6,3],[10,6,4],[10,6,5],[10,6,6],[10,7,0],[10,7,1],[10,7,2],[10,7,3],[10,7,4],[10,7,5],[10,8,0],[10,8,1],[10,8,2],[10,8,3],[10,8,4],[10,9,0],[10,9,1],[10,9,2],[10,9,3],[10,10,0],[10,10,1],[10,10,2],[10,11,0],[10,11,1],[10,12,0],[11,0,0],[11,0,1],[11,0,2],[11,0,3],[11,0,4],[11,0,5],[11,0,6],[11,0,7],[11,0,8],[11,0,9],[11,0,10],[11,0,11],[11,1,0],[11,1,1],[11,1,2],[11,1,3],[11,1,4],[11,1,5],[11,1,6],[11,1,7],[11,1,8],[11,1,9],[11,1,10],[11,2,0],[11,2,1],[11,2,2],[11,2,3],[11,2,4],[11,2,5],[11,2,6],[11,2,7],[11,2,8],[11,2,9],[11,3,0],[11,3,1],[11,3,2],[11,3,3],[11,3,4],[11,3,5],[11,3,6],[11,3,7],[11,3,8],[11,4,0],[11,4,1],[11,4,2],[11,4,3],[11,4,4],[11,4,5],[11,4,6],[11,4,7],[11,5,0],[11,5,1],[11,5,2],[11,5,3],[11,5,4],[11,5,5],[11,5,6],[11,6,0],[11,6,1],[11,6,2],[11,6,3],[11,6,4],[11,6,5],[11,7,0],[11,7,1],[11,7,2],[11,7,3],[11,7,4],[11,8,0],[11,8,1],[11,8,2],[11,8,3],[11,9,0],[11,9,1],[11,9,2],[11,10,0],[11,10,1],[11,11,0],[12,0,0],[12,0,1],[12,0,2],[12,0,3],[12,0,4],[12,0,5],[12,0,6],[12,0,7],[12,0,8],[12,0,9],[12,0,10],[12,1,0],[12,1,1],[12,1,2],[12,1,3],[12,1,4],[12,1,5],[12,1,6],[12,1,7],[12,1,8],[12,1,9],[12,2,0],[12,2,1],[12,2,2],[12,2,3],[12,2,4],[12,2,5],[12,2,6],[12,2,7],[12,2,8],[12,3,0],[12,3,1],[12,3,2],[12,3,3],[12,3,4],[12,3,5],[12,3,6],[12,3,7],[12,4,0],[12,4,1],[12,4,2],[12,4,3],[12,4,4],[12,4,5],[12,4,6],[12,5,0],[12,5,1],[12,5,2],[12,5,3],[12,5,4],[12,5,5],[12,6,0],[12,6,1],[12,6,2],[12,6,3],[12,6,4],[12,7,0],[12,7,1],[12,7,2],[12,7,3],[12,8,0],[12,8,1],[12,8,2],[12,9,0],[12,9,1],[12,10,0],[13,0,0],[13,0,1],[13,0,2],[13,0,3],[13,0,4],[13,0,5],[13,0,6],[13,0,7],[13,0,8],[13,0,9],[13,1,0],[13,1,1],[13,1,2],[13,1,3],[13,1,4],[13,1,5],[13,1,6],[13,1,7],[13,1,8],[13,2,0],[13,2,1],[13,2,2],[13,2,3],[13,2,4],[13,2,5],[13,2,6],[13,2,7],[13,3,0],[13,3,1],[13,3,2],[13,3,3],[13,3,4],[13,3,5],[13,3,6],[13,4,0],[13,4,1],[13,4,2],[13,4,3],[13,4,4],[13,4,5],[13,5,0],[13,5,1],[13,5,2],[13,5,3],[13,5,4],[13,6,0],[13,6,1],[13,6,2],[13,6,3],[13,7,0],[13,7,1],[13,7,2],[13,8,0],[13,8,1],[13,9,0],[14,0,0],[14,0,1],[14,0,2],[14,0,3],[14,0,4],[14,0,5],[14,0,6],[14,0,7],[14,0,8],[14,1,0],[14,1,1],[14,1,2],[14,1,3],[14,1,4],[14,1,5],[14,1,6],[14,1,7],[14,2,0],[14,2,1],[14,2,2],[14,2,3],[14,2,4],[14,2,5],[14,2,6],[14,3,0],[14,3,1],[14,3,2],[14,3,3],[14,3,4],[14,3,5],[14,4,0],[14,4,1],[14,4,2],[14,4,3],[14,4,4],[14,5,0],[14,5,1],[14,5,2],[14,5,3],[14,6,0],[14,6,1],[14,6,2],[14,7,0],[14,7,1],[14,8,0],[15,0,0],[15,0,1],[15,0,2],[15,0,3],[15,0,4],[15,0,5],[15,0,6],[15,0,7],[15,1,0],[15,1,1],[15,1,2],[15,1,3],[15,1,4],[15,1,5],[15,1,6],[15,2,0],[15,2,1],[15,2,2],[15,2,3],[15,2,4],[15,2,5],[15,3,0],[15,3,1],[15,3,2],[15,3,3],[15,3,4],[15,4,0],[15,4,1],[15,4,2],[15,4,3],[15,5,0],[15,5,1],[15,5,2],[15,6,0],[15,6,1],[15,7,0]],
      /* 1* */[[0,8,15],[0,9,14],[0,9,15],[0,10,13],[0,10,14],[0,10,15],[0,11,12],[0,11,13],[0,11,14],[0,11,15],[0,12,11],[0,12,12],[0,12,13],[0,12,14],[0,12,15],[0,13,10],[0,13,11],[0,13,12],[0,13,13],[0,13,14],[0,13,15],[0,14,9],[0,14,10],[0,14,11],[0,14,12],[0,14,13],[0,14,14],[0,14,15],[0,15,8],[0,15,9],[0,15,10],[0,15,11],[0,15,12],[0,15,13],[0,15,14],[1,7,15],[1,8,14],[1,8,15],[1,9,13],[1,9,14],[1,9,15],[1,10,12],[1,10,13],[1,10,14],[1,10,15],[1,11,11],[1,11,12],[1,11,13],[1,11,14],[1,11,15],[1,12,10],[1,12,11],[1,12,12],[1,12,13],[1,12,14],[1,12,15],[1,13,9],[1,13,10],[1,13,11],[1,13,12],[1,13,13],[1,13,14],[1,13,15],[1,14,8],[1,14,9],[1,14,10],[1,14,11],[1,14,12],[1,14,13],[1,14,14],[1,15,7],[1,15,8],[1,15,9],[1,15,10],[1,15,11],[1,15,12],[1,15,13],[2,6,15],[2,7,14],[2,7,15],[2,8,13],[2,8,14],[2,8,15],[2,9,12],[2,9,13],[2,9,14],[2,9,15],[2,10,11],[2,10,12],[2,10,13],[2,10,14],[2,10,15],[2,11,10],[2,11,11],[2,11,12],[2,11,13],[2,11,14],[2,11,15],[2,12,9],[2,12,10],[2,12,11],[2,12,12],[2,12,13],[2,12,14],[2,12,15],[2,13,8],[2,13,9],[2,13,10],[2,13,11],[2,13,12],[2,13,13],[2,13,14],[2,14,7],[2,14,8],[2,14,9],[2,14,10],[2,14,11],[2,14,12],[2,14,13],[2,15,6],[2,15,7],[2,15,8],[2,15,9],[2,15,10],[2,15,11],[2,15,12],[3,5,15],[3,6,14],[3,6,15],[3,7,13],[3,7,14],[3,7,15],[3,8,12],[3,8,13],[3,8,14],[3,8,15],[3,9,11],[3,9,12],[3,9,13],[3,9,14],[3,9,15],[3,10,10],[3,10,11],[3,10,12],[3,10,13],[3,10,14],[3,10,15],[3,11,9],[3,11,10],[3,11,11],[3,11,12],[3,11,13],[3,11,14],[3,11,15],[3,12,8],[3,12,9],[3,12,10],[3,12,11],[3,12,12],[3,12,13],[3,12,14],[3,13,7],[3,13,8],[3,13,9],[3,13,10],[3,13,11],[3,13,12],[3,13,13],[3,14,6],[3,14,7],[3,14,8],[3,14,9],[3,14,10],[3,14,11],[3,14,12],[3,15,5],[3,15,6],[3,15,7],[3,15,8],[3,15,9],[3,15,10],[3,15,11],[4,4,15],[4,5,14],[4,5,15],[4,6,13],[4,6,14],[4,6,15],[4,7,12],[4,7,13],[4,7,14],[4,7,15],[4,8,11],[4,8,12],[4,8,13],[4,8,14],[4,8,15],[4,9,10],[4,9,11],[4,9,12],[4,9,13],[4,9,14],[4,9,15],[4,10,9],[4,10,10],[4,10,11],[4,10,12],[4,10,13],[4,10,14],[4,10,15],[4,11,8],[4,11,9],[4,11,10],[4,11,11],[4,11,12],[4,11,13],[4,11,14],[4,12,7],[4,12,8],[4,12,9],[4,12,10],[4,12,11],[4,12,12],[4,12,13],[4,13,6],[4,13,7],[4,13,8],[4,13,9],[4,13,10],[4,13,11],[4,13,12],[4,14,5],[4,14,6],[4,14,7],[4,14,8],[4,14,9],[4,14,10],[4,14,11],[4,15,4],[4,15,5],[4,15,6],[4,15,7],[4,15,8],[4,15,9],[4,15,10],[5,3,15],[5,4,14],[5,4,15],[5,5,13],[5,5,14],[5,5,15],[5,6,12],[5,6,13],[5,6,14],[5,6,15],[5,7,11],[5,7,12],[5,7,13],[5,7,14],[5,7,15],[5,8,10],[5,8,11],[5,8,12],[5,8,13],[5,8,14],[5,8,15],[5,9,9],[5,9,10],[5,9,11],[5,9,12],[5,9,13],[5,9,14],[5,9,15],[5,10,8],[5,10,9],[5,10,10],[5,10,11],[5,10,12],[5,10,13],[5,10,14],[5,11,7],[5,11,8],[5,11,9],[5,11,10],[5,11,11],[5,11,12],[5,11,13],[5,12,6],[5,12,7],[5,12,8],[5,12,9],[5,12,10],[5,12,11],[5,12,12],[5,13,5],[5,13,6],[5,13,7],[5,13,8],[5,13,9],[5,13,10],[5,13,11],[5,14,4],[5,14,5],[5,14,6],[5,14,7],[5,14,8],[5,14,9],[5,14,10],[5,15,3],[5,15,4],[5,15,5],[5,15,6],[5,15,7],[5,15,8],[5,15,9],[6,2,15],[6,3,14],[6,3,15],[6,4,13],[6,4,14],[6,4,15],[6,5,12],[6,5,13],[6,5,14],[6,5,15],[6,6,11],[6,6,12],[6,6,13],[6,6,14],[6,6,15],[6,7,10],[6,7,11],[6,7,12],[6,7,13],[6,7,14],[6,7,15],[6,8,9],[6,8,10],[6,8,11],[6,8,12],[6,8,13],[6,8,14],[6,8,15],[6,9,8],[6,9,9],[6,9,10],[6,9,11],[6,9,12],[6,9,13],[6,9,14],[6,10,7],[6,10,8],[6,10,9],[6,10,10],[6,10,11],[6,10,12],[6,10,13],[6,11,6],[6,11,7],[6,11,8],[6,11,9],[6,11,10],[6,11,11],[6,11,12],[6,12,5],[6,12,6],[6,12,7],[6,12,8],[6,12,9],[6,12,10],[6,12,11],[6,13,4],[6,13,5],[6,13,6],[6,13,7],[6,13,8],[6,13,9],[6,13,10],[6,14,3],[6,14,4],[6,14,5],[6,14,6],[6,14,7],[6,14,8],[6,14,9],[6,15,2],[6,15,3],[6,15,4],[6,15,5],[6,15,6],[6,15,7],[6,15,8],[7,1,15],[7,2,14],[7,2,15],[7,3,13],[7,3,14],[7,3,15],[7,4,12],[7,4,13],[7,4,14],[7,4,15],[7,5,11],[7,5,12],[7,5,13],[7,5,14],[7,5,15],[7,6,10],[7,6,11],[7,6,12],[7,6,13],[7,6,14],[7,6,15],[7,7,9],[7,7,10],[7,7,11],[7,7,12],[7,7,13],[7,7,14],[7,7,15],[7,8,8],[7,8,9],[7,8,10],[7,8,11],[7,8,12],[7,8,13],[7,8,14],[7,9,7],[7,9,8],[7,9,9],[7,9,10],[7,9,11],[7,9,12],[7,9,13],[7,10,6],[7,10,7],[7,10,8],[7,10,9],[7,10,10],[7,10,11],[7,10,12],[7,11,5],[7,11,6],[7,11,7],[7,11,8],[7,11,9],[7,11,10],[7,11,11],[7,12,4],[7,12,5],[7,12,6],[7,12,7],[7,12,8],[7,12,9],[7,12,10],[7,13,3],[7,13,4],[7,13,5],[7,13,6],[7,13,7],[7,13,8],[7,13,9],[7,14,2],[7,14,3],[7,14,4],[7,14,5],[7,14,6],[7,14,7],[7,14,8],[7,15,1],[7,15,2],[7,15,3],[7,15,4],[7,15,5],[7,15,6],[7,15,7],[8,0,15],[8,1,14],[8,1,15],[8,2,13],[8,2,14],[8,2,15],[8,3,12],[8,3,13],[8,3,14],[8,3,15],[8,4,11],[8,4,12],[8,4,13],[8,4,14],[8,4,15],[8,5,10],[8,5,11],[8,5,12],[8,5,13],[8,5,14],[8,5,15],[8,6,9],[8,6,10],[8,6,11],[8,6,12],[8,6,13],[8,6,14],[8,6,15],[8,7,8],[8,7,9],[8,7,10],[8,7,11],[8,7,12],[8,7,13],[8,7,14],[8,8,7],[8,8,8],[8,8,9],[8,8,10],[8,8,11],[8,8,12],[8,8,13],[8,9,6],[8,9,7],[8,9,8],[8,9,9],[8,9,10],[8,9,11],[8,9,12],[8,10,5],[8,10,6],[8,10,7],[8,10,8],[8,10,9],[8,10,10],[8,10,11],[8,11,4],[8,11,5],[8,11,6],[8,11,7],[8,11,8],[8,11,9],[8,11,10],[8,12,3],[8,12,4],[8,12,5],[8,12,6],[8,12,7],[8,12,8],[8,12,9],[8,13,2],[8,13,3],[8,13,4],[8,13,5],[8,13,6],[8,13,7],[8,13,8],[8,14,1],[8,14,2],[8,14,3],[8,14,4],[8,14,5],[8,14,6],[8,14,7],[8,15,0],[8,15,1],[8,15,2],[8,15,3],[8,15,4],[8,15,5],[8,15,6],[9,0,14],[9,0,15],[9,1,13],[9,1,14],[9,1,15],[9,2,12],[9,2,13],[9,2,14],[9,2,15],[9,3,11],[9,3,12],[9,3,13],[9,3,14],[9,3,15],[9,4,10],[9,4,11],[9,4,12],[9,4,13],[9,4,14],[9,4,15],[9,5,9],[9,5,10],[9,5,11],[9,5,12],[9,5,13],[9,5,14],[9,5,15],[9,6,8],[9,6,9],[9,6,10],[9,6,11],[9,6,12],[9,6,13],[9,6,14],[9,7,7],[9,7,8],[9,7,9],[9,7,10],[9,7,11],[9,7,12],[9,7,13],[9,8,6],[9,8,7],[9,8,8],[9,8,9],[9,8,10],[9,8,11],[9,8,12],[9,9,5],[9,9,6],[9,9,7],[9,9,8],[9,9,9],[9,9,10],[9,9,11],[9,10,4],[9,10,5],[9,10,6],[9,10,7],[9,10,8],[9,10,9],[9,10,10],[9,11,3],[9,11,4],[9,11,5],[9,11,6],[9,11,7],[9,11,8],[9,11,9],[9,12,2],[9,12,3],[9,12,4],[9,12,5],[9,12,6],[9,12,7],[9,12,8],[9,13,1],[9,13,2],[9,13,3],[9,13,4],[9,13,5],[9,13,6],[9,13,7],[9,14,0],[9,14,1],[9,14,2],[9,14,3],[9,14,4],[9,14,5],[9,14,6],[9,15,0],[9,15,1],[9,15,2],[9,15,3],[9,15,4],[9,15,5],[10,0,13],[10,0,14],[10,0,15],[10,1,12],[10,1,13],[10,1,14],[10,1,15],[10,2,11],[10,2,12],[10,2,13],[10,2,14],[10,2,15],[10,3,10],[10,3,11],[10,3,12],[10,3,13],[10,3,14],[10,3,15],[10,4,9],[10,4,10],[10,4,11],[10,4,12],[10,4,13],[10,4,14],[10,4,15],[10,5,8],[10,5,9],[10,5,10],[10,5,11],[10,5,12],[10,5,13],[10,5,14],[10,6,7],[10,6,8],[10,6,9],[10,6,10],[10,6,11],[10,6,12],[10,6,13],[10,7,6],[10,7,7],[10,7,8],[10,7,9],[10,7,10],[10,7,11],[10,7,12],[10,8,5],[10,8,6],[10,8,7],[10,8,8],[10,8,9],[10,8,10],[10,8,11],[10,9,4],[10,9,5],[10,9,6],[10,9,7],[10,9,8],[10,9,9],[10,9,10],[10,10,3],[10,10,4],[10,10,5],[10,10,6],[10,10,7],[10,10,8],[10,10,9],[10,11,2],[10,11,3],[10,11,4],[10,11,5],[10,11,6],[10,11,7],[10,11,8],[10,12,1],[10,12,2],[10,12,3],[10,12,4],[10,12,5],[10,12,6],[10,12,7],[10,13,0],[10,13,1],[10,13,2],[10,13,3],[10,13,4],[10,13,5],[10,13,6],[10,14,0],[10,14,1],[10,14,2],[10,14,3],[10,14,4],[10,14,5],[10,15,0],[10,15,1],[10,15,2],[10,15,3],[10,15,4],[11,0,12],[11,0,13],[11,0,14],[11,0,15],[11,1,11],[11,1,12],[11,1,13],[11,1,14],[11,1,15],[11,2,10],[11,2,11],[11,2,12],[11,2,13],[11,2,14],[11,2,15],[11,3,9],[11,3,10],[11,3,11],[11,3,12],[11,3,13],[11,3,14],[11,3,15],[11,4,8],[11,4,9],[11,4,10],[11,4,11],[11,4,12],[11,4,13],[11,4,14],[11,5,7],[11,5,8],[11,5,9],[11,5,10],[11,5,11],[11,5,12],[11,5,13],[11,6,6],[11,6,7],[11,6,8],[11,6,9],[11,6,10],[11,6,11],[11,6,12],[11,7,5],[11,7,6],[11,7,7],[11,7,8],[11,7,9],[11,7,10],[11,7,11],[11,8,4],[11,8,5],[11,8,6],[11,8,7],[11,8,8],[11,8,9],[11,8,10],[11,9,3],[11,9,4],[11,9,5],[11,9,6],[11,9,7],[11,9,8],[11,9,9],[11,10,2],[11,10,3],[11,10,4],[11,10,5],[11,10,6],[11,10,7],[11,10,8],[11,11,1],[11,11,2],[11,11,3],[11,11,4],[11,11,5],[11,11,6],[11,11,7],[11,12,0],[11,12,1],[11,12,2],[11,12,3],[11,12,4],[11,12,5],[11,12,6],[11,13,0],[11,13,1],[11,13,2],[11,13,3],[11,13,4],[11,13,5],[11,14,0],[11,14,1],[11,14,2],[11,14,3],[11,14,4],[11,15,0],[11,15,1],[11,15,2],[11,15,3],[12,0,11],[12,0,12],[12,0,13],[12,0,14],[12,0,15],[12,1,10],[12,1,11],[12,1,12],[12,1,13],[12,1,14],[12,1,15],[12,2,9],[12,2,10],[12,2,11],[12,2,12],[12,2,13],[12,2,14],[12,2,15],[12,3,8],[12,3,9],[12,3,10],[12,3,11],[12,3,12],[12,3,13],[12,3,14],[12,4,7],[12,4,8],[12,4,9],[12,4,10],[12,4,11],[12,4,12],[12,4,13],[12,5,6],[12,5,7],[12,5,8],[12,5,9],[12,5,10],[12,5,11],[12,5,12],[12,6,5],[12,6,6],[12,6,7],[12,6,8],[12,6,9],[12,6,10],[12,6,11],[12,7,4],[12,7,5],[12,7,6],[12,7,7],[12,7,8],[12,7,9],[12,7,10],[12,8,3],[12,8,4],[12,8,5],[12,8,6],[12,8,7],[12,8,8],[12,8,9],[12,9,2],[12,9,3],[12,9,4],[12,9,5],[12,9,6],[12,9,7],[12,9,8],[12,10,1],[12,10,2],[12,10,3],[12,10,4],[12,10,5],[12,10,6],[12,10,7],[12,11,0],[12,11,1],[12,11,2],[12,11,3],[12,11,4],[12,11,5],[12,11,6],[12,12,0],[12,12,1],[12,12,2],[12,12,3],[12,12,4],[12,12,5],[12,13,0],[12,13,1],[12,13,2],[12,13,3],[12,13,4],[12,14,0],[12,14,1],[12,14,2],[12,14,3],[12,15,0],[12,15,1],[12,15,2],[13,0,10],[13,0,11],[13,0,12],[13,0,13],[13,0,14],[13,0,15],[13,1,9],[13,1,10],[13,1,11],[13,1,12],[13,1,13],[13,1,14],[13,1,15],[13,2,8],[13,2,9],[13,2,10],[13,2,11],[13,2,12],[13,2,13],[13,2,14],[13,3,7],[13,3,8],[13,3,9],[13,3,10],[13,3,11],[13,3,12],[13,3,13],[13,4,6],[13,4,7],[13,4,8],[13,4,9],[13,4,10],[13,4,11],[13,4,12],[13,5,5],[13,5,6],[13,5,7],[13,5,8],[13,5,9],[13,5,10],[13,5,11],[13,6,4],[13,6,5],[13,6,6],[13,6,7],[13,6,8],[13,6,9],[13,6,10],[13,7,3],[13,7,4],[13,7,5],[13,7,6],[13,7,7],[13,7,8],[13,7,9],[13,8,2],[13,8,3],[13,8,4],[13,8,5],[13,8,6],[13,8,7],[13,8,8],[13,9,1],[13,9,2],[13,9,3],[13,9,4],[13,9,5],[13,9,6],[13,9,7],[13,10,0],[13,10,1],[13,10,2],[13,10,3],[13,10,4],[13,10,5],[13,10,6],[13,11,0],[13,11,1],[13,11,2],[13,11,3],[13,11,4],[13,11,5],[13,12,0],[13,12,1],[13,12,2],[13,12,3],[13,12,4],[13,13,0],[13,13,1],[13,13,2],[13,13,3],[13,14,0],[13,14,1],[13,14,2],[13,15,0],[13,15,1],[14,0,9],[14,0,10],[14,0,11],[14,0,12],[14,0,13],[14,0,14],[14,0,15],[14,1,8],[14,1,9],[14,1,10],[14,1,11],[14,1,12],[14,1,13],[14,1,14],[14,2,7],[14,2,8],[14,2,9],[14,2,10],[14,2,11],[14,2,12],[14,2,13],[14,3,6],[14,3,7],[14,3,8],[14,3,9],[14,3,10],[14,3,11],[14,3,12],[14,4,5],[14,4,6],[14,4,7],[14,4,8],[14,4,9],[14,4,10],[14,4,11],[14,5,4],[14,5,5],[14,5,6],[14,5,7],[14,5,8],[14,5,9],[14,5,10],[14,6,3],[14,6,4],[14,6,5],[14,6,6],[14,6,7],[14,6,8],[14,6,9],[14,7,2],[14,7,3],[14,7,4],[14,7,5],[14,7,6],[14,7,7],[14,7,8],[14,8,1],[14,8,2],[14,8,3],[14,8,4],[14,8,5],[14,8,6],[14,8,7],[14,9,0],[14,9,1],[14,9,2],[14,9,3],[14,9,4],[14,9,5],[14,9,6],[14,10,0],[14,10,1],[14,10,2],[14,10,3],[14,10,4],[14,10,5],[14,11,0],[14,11,1],[14,11,2],[14,11,3],[14,11,4],[14,12,0],[14,12,1],[14,12,2],[14,12,3],[14,13,0],[14,13,1],[14,13,2],[14,14,0],[14,14,1],[14,15,0],[15,0,8],[15,0,9],[15,0,10],[15,0,11],[15,0,12],[15,0,13],[15,0,14],[15,1,7],[15,1,8],[15,1,9],[15,1,10],[15,1,11],[15,1,12],[15,1,13],[15,2,6],[15,2,7],[15,2,8],[15,2,9],[15,2,10],[15,2,11],[15,2,12],[15,3,5],[15,3,6],[15,3,7],[15,3,8],[15,3,9],[15,3,10],[15,3,11],[15,4,4],[15,4,5],[15,4,6],[15,4,7],[15,4,8],[15,4,9],[15,4,10],[15,5,3],[15,5,4],[15,5,5],[15,5,6],[15,5,7],[15,5,8],[15,5,9],[15,6,2],[15,6,3],[15,6,4],[15,6,5],[15,6,6],[15,6,7],[15,6,8],[15,7,1],[15,7,2],[15,7,3],[15,7,4],[15,7,5],[15,7,6],[15,7,7],[15,8,0],[15,8,1],[15,8,2],[15,8,3],[15,8,4],[15,8,5],[15,8,6],[15,9,0],[15,9,1],[15,9,2],[15,9,3],[15,9,4],[15,9,5],[15,10,0],[15,10,1],[15,10,2],[15,10,3],[15,10,4],[15,11,0],[15,11,1],[15,11,2],[15,11,3],[15,12,0],[15,12,1],[15,12,2],[15,13,0],[15,13,1],[15,14,0]],
      /* 2* */[[0,15,15],[1,14,15],[1,15,14],[1,15,15],[2,13,15],[2,14,14],[2,14,15],[2,15,13],[2,15,14],[2,15,15],[3,12,15],[3,13,14],[3,13,15],[3,14,13],[3,14,14],[3,14,15],[3,15,12],[3,15,13],[3,15,14],[3,15,15],[4,11,15],[4,12,14],[4,12,15],[4,13,13],[4,13,14],[4,13,15],[4,14,12],[4,14,13],[4,14,14],[4,14,15],[4,15,11],[4,15,12],[4,15,13],[4,15,14],[4,15,15],[5,10,15],[5,11,14],[5,11,15],[5,12,13],[5,12,14],[5,12,15],[5,13,12],[5,13,13],[5,13,14],[5,13,15],[5,14,11],[5,14,12],[5,14,13],[5,14,14],[5,14,15],[5,15,10],[5,15,11],[5,15,12],[5,15,13],[5,15,14],[5,15,15],[6,9,15],[6,10,14],[6,10,15],[6,11,13],[6,11,14],[6,11,15],[6,12,12],[6,12,13],[6,12,14],[6,12,15],[6,13,11],[6,13,12],[6,13,13],[6,13,14],[6,13,15],[6,14,10],[6,14,11],[6,14,12],[6,14,13],[6,14,14],[6,14,15],[6,15,9],[6,15,10],[6,15,11],[6,15,12],[6,15,13],[6,15,14],[6,15,15],[7,8,15],[7,9,14],[7,9,15],[7,10,13],[7,10,14],[7,10,15],[7,11,12],[7,11,13],[7,11,14],[7,11,15],[7,12,11],[7,12,12],[7,12,13],[7,12,14],[7,12,15],[7,13,10],[7,13,11],[7,13,12],[7,13,13],[7,13,14],[7,13,15],[7,14,9],[7,14,10],[7,14,11],[7,14,12],[7,14,13],[7,14,14],[7,14,15],[7,15,8],[7,15,9],[7,15,10],[7,15,11],[7,15,12],[7,15,13],[7,15,14],[8,7,15],[8,8,14],[8,8,15],[8,9,13],[8,9,14],[8,9,15],[8,10,12],[8,10,13],[8,10,14],[8,10,15],[8,11,11],[8,11,12],[8,11,13],[8,11,14],[8,11,15],[8,12,10],[8,12,11],[8,12,12],[8,12,13],[8,12,14],[8,12,15],[8,13,9],[8,13,10],[8,13,11],[8,13,12],[8,13,13],[8,13,14],[8,13,15],[8,14,8],[8,14,9],[8,14,10],[8,14,11],[8,14,12],[8,14,13],[8,14,14],[8,15,7],[8,15,8],[8,15,9],[8,15,10],[8,15,11],[8,15,12],[8,15,13],[9,6,15],[9,7,14],[9,7,15],[9,8,13],[9,8,14],[9,8,15],[9,9,12],[9,9,13],[9,9,14],[9,9,15],[9,10,11],[9,10,12],[9,10,13],[9,10,14],[9,10,15],[9,11,10],[9,11,11],[9,11,12],[9,11,13],[9,11,14],[9,11,15],[9,12,9],[9,12,10],[9,12,11],[9,12,12],[9,12,13],[9,12,14],[9,12,15],[9,13,8],[9,13,9],[9,13,10],[9,13,11],[9,13,12],[9,13,13],[9,13,14],[9,14,7],[9,14,8],[9,14,9],[9,14,10],[9,14,11],[9,14,12],[9,14,13],[9,15,6],[9,15,7],[9,15,8],[9,15,9],[9,15,10],[9,15,11],[9,15,12],[10,5,15],[10,6,14],[10,6,15],[10,7,13],[10,7,14],[10,7,15],[10,8,12],[10,8,13],[10,8,14],[10,8,15],[10,9,11],[10,9,12],[10,9,13],[10,9,14],[10,9,15],[10,10,10],[10,10,11],[10,10,12],[10,10,13],[10,10,14],[10,10,15],[10,11,9],[10,11,10],[10,11,11],[10,11,12],[10,11,13],[10,11,14],[10,11,15],[10,12,8],[10,12,9],[10,12,10],[10,12,11],[10,12,12],[10,12,13],[10,12,14],[10,13,7],[10,13,8],[10,13,9],[10,13,10],[10,13,11],[10,13,12],[10,13,13],[10,14,6],[10,14,7],[10,14,8],[10,14,9],[10,14,10],[10,14,11],[10,14,12],[10,15,5],[10,15,6],[10,15,7],[10,15,8],[10,15,9],[10,15,10],[10,15,11],[11,4,15],[11,5,14],[11,5,15],[11,6,13],[11,6,14],[11,6,15],[11,7,12],[11,7,13],[11,7,14],[11,7,15],[11,8,11],[11,8,12],[11,8,13],[11,8,14],[11,8,15],[11,9,10],[11,9,11],[11,9,12],[11,9,13],[11,9,14],[11,9,15],[11,10,9],[11,10,10],[11,10,11],[11,10,12],[11,10,13],[11,10,14],[11,10,15],[11,11,8],[11,11,9],[11,11,10],[11,11,11],[11,11,12],[11,11,13],[11,11,14],[11,12,7],[11,12,8],[11,12,9],[11,12,10],[11,12,11],[11,12,12],[11,12,13],[11,13,6],[11,13,7],[11,13,8],[11,13,9],[11,13,10],[11,13,11],[11,13,12],[11,14,5],[11,14,6],[11,14,7],[11,14,8],[11,14,9],[11,14,10],[11,14,11],[11,15,4],[11,15,5],[11,15,6],[11,15,7],[11,15,8],[11,15,9],[11,15,10],[12,3,15],[12,4,14],[12,4,15],[12,5,13],[12,5,14],[12,5,15],[12,6,12],[12,6,13],[12,6,14],[12,6,15],[12,7,11],[12,7,12],[12,7,13],[12,7,14],[12,7,15],[12,8,10],[12,8,11],[12,8,12],[12,8,13],[12,8,14],[12,8,15],[12,9,9],[12,9,10],[12,9,11],[12,9,12],[12,9,13],[12,9,14],[12,9,15],[12,10,8],[12,10,9],[12,10,10],[12,10,11],[12,10,12],[12,10,13],[12,10,14],[12,11,7],[12,11,8],[12,11,9],[12,11,10],[12,11,11],[12,11,12],[12,11,13],[12,12,6],[12,12,7],[12,12,8],[12,12,9],[12,12,10],[12,12,11],[12,12,12],[12,13,5],[12,13,6],[12,13,7],[12,13,8],[12,13,9],[12,13,10],[12,13,11],[12,14,4],[12,14,5],[12,14,6],[12,14,7],[12,14,8],[12,14,9],[12,14,10],[12,15,3],[12,15,4],[12,15,5],[12,15,6],[12,15,7],[12,15,8],[12,15,9],[13,2,15],[13,3,14],[13,3,15],[13,4,13],[13,4,14],[13,4,15],[13,5,12],[13,5,13],[13,5,14],[13,5,15],[13,6,11],[13,6,12],[13,6,13],[13,6,14],[13,6,15],[13,7,10],[13,7,11],[13,7,12],[13,7,13],[13,7,14],[13,7,15],[13,8,9],[13,8,10],[13,8,11],[13,8,12],[13,8,13],[13,8,14],[13,8,15],[13,9,8],[13,9,9],[13,9,10],[13,9,11],[13,9,12],[13,9,13],[13,9,14],[13,10,7],[13,10,8],[13,10,9],[13,10,10],[13,10,11],[13,10,12],[13,10,13],[13,11,6],[13,11,7],[13,11,8],[13,11,9],[13,11,10],[13,11,11],[13,11,12],[13,12,5],[13,12,6],[13,12,7],[13,12,8],[13,12,9],[13,12,10],[13,12,11],[13,13,4],[13,13,5],[13,13,6],[13,13,7],[13,13,8],[13,13,9],[13,13,10],[13,14,3],[13,14,4],[13,14,5],[13,14,6],[13,14,7],[13,14,8],[13,14,9],[13,15,2],[13,15,3],[13,15,4],[13,15,5],[13,15,6],[13,15,7],[13,15,8],[14,1,15],[14,2,14],[14,2,15],[14,3,13],[14,3,14],[14,3,15],[14,4,12],[14,4,13],[14,4,14],[14,4,15],[14,5,11],[14,5,12],[14,5,13],[14,5,14],[14,5,15],[14,6,10],[14,6,11],[14,6,12],[14,6,13],[14,6,14],[14,6,15],[14,7,9],[14,7,10],[14,7,11],[14,7,12],[14,7,13],[14,7,14],[14,7,15],[14,8,8],[14,8,9],[14,8,10],[14,8,11],[14,8,12],[14,8,13],[14,8,14],[14,9,7],[14,9,8],[14,9,9],[14,9,10],[14,9,11],[14,9,12],[14,9,13],[14,10,6],[14,10,7],[14,10,8],[14,10,9],[14,10,10],[14,10,11],[14,10,12],[14,11,5],[14,11,6],[14,11,7],[14,11,8],[14,11,9],[14,11,10],[14,11,11],[14,12,4],[14,12,5],[14,12,6],[14,12,7],[14,12,8],[14,12,9],[14,12,10],[14,13,3],[14,13,4],[14,13,5],[14,13,6],[14,13,7],[14,13,8],[14,13,9],[14,14,2],[14,14,3],[14,14,4],[14,14,5],[14,14,6],[14,14,7],[14,14,8],[14,15,1],[14,15,2],[14,15,3],[14,15,4],[14,15,5],[14,15,6],[14,15,7],[15,0,15],[15,1,14],[15,1,15],[15,2,13],[15,2,14],[15,2,15],[15,3,12],[15,3,13],[15,3,14],[15,3,15],[15,4,11],[15,4,12],[15,4,13],[15,4,14],[15,4,15],[15,5,10],[15,5,11],[15,5,12],[15,5,13],[15,5,14],[15,5,15],[15,6,9],[15,6,10],[15,6,11],[15,6,12],[15,6,13],[15,6,14],[15,6,15],[15,7,8],[15,7,9],[15,7,10],[15,7,11],[15,7,12],[15,7,13],[15,7,14],[15,8,7],[15,8,8],[15,8,9],[15,8,10],[15,8,11],[15,8,12],[15,8,13],[15,9,6],[15,9,7],[15,9,8],[15,9,9],[15,9,10],[15,9,11],[15,9,12],[15,10,5],[15,10,6],[15,10,7],[15,10,8],[15,10,9],[15,10,10],[15,10,11],[15,11,4],[15,11,5],[15,11,6],[15,11,7],[15,11,8],[15,11,9],[15,11,10],[15,12,3],[15,12,4],[15,12,5],[15,12,6],[15,12,7],[15,12,8],[15,12,9],[15,13,2],[15,13,3],[15,13,4],[15,13,5],[15,13,6],[15,13,7],[15,13,8],[15,14,1],[15,14,2],[15,14,3],[15,14,4],[15,14,5],[15,14,6],[15,14,7],[15,15,0],[15,15,1],[15,15,2],[15,15,3],[15,15,4],[15,15,5],[15,15,6]],
      /* 3* */[[7,15,15],[8,14,15],[8,15,14],[8,15,15],[9,13,15],[9,14,14],[9,14,15],[9,15,13],[9,15,14],[9,15,15],[10,12,15],[10,13,14],[10,13,15],[10,14,13],[10,14,14],[10,14,15],[10,15,12],[10,15,13],[10,15,14],[10,15,15],[11,11,15],[11,12,14],[11,12,15],[11,13,13],[11,13,14],[11,13,15],[11,14,12],[11,14,13],[11,14,14],[11,14,15],[11,15,11],[11,15,12],[11,15,13],[11,15,14],[11,15,15],[12,10,15],[12,11,14],[12,11,15],[12,12,13],[12,12,14],[12,12,15],[12,13,12],[12,13,13],[12,13,14],[12,13,15],[12,14,11],[12,14,12],[12,14,13],[12,14,14],[12,14,15],[12,15,10],[12,15,11],[12,15,12],[12,15,13],[12,15,14],[12,15,15],[13,9,15],[13,10,14],[13,10,15],[13,11,13],[13,11,14],[13,11,15],[13,12,12],[13,12,13],[13,12,14],[13,12,15],[13,13,11],[13,13,12],[13,13,13],[13,13,14],[13,13,15],[13,14,10],[13,14,11],[13,14,12],[13,14,13],[13,14,14],[13,14,15],[13,15,9],[13,15,10],[13,15,11],[13,15,12],[13,15,13],[13,15,14],[13,15,15],[14,8,15],[14,9,14],[14,9,15],[14,10,13],[14,10,14],[14,10,15],[14,11,12],[14,11,13],[14,11,14],[14,11,15],[14,12,11],[14,12,12],[14,12,13],[14,12,14],[14,12,15],[14,13,10],[14,13,11],[14,13,12],[14,13,13],[14,13,14],[14,13,15],[14,14,9],[14,14,10],[14,14,11],[14,14,12],[14,14,13],[14,14,14],[14,14,15],[14,15,8],[14,15,9],[14,15,10],[14,15,11],[14,15,12],[14,15,13],[14,15,14],[14,15,15],[15,7,15],[15,8,14],[15,8,15],[15,9,13],[15,9,14],[15,9,15],[15,10,12],[15,10,13],[15,10,14],[15,10,15],[15,11,11],[15,11,12],[15,11,13],[15,11,14],[15,11,15],[15,12,10],[15,12,11],[15,12,12],[15,12,13],[15,12,14],[15,12,15],[15,13,9],[15,13,10],[15,13,11],[15,13,12],[15,13,13],[15,13,14],[15,13,15],[15,14,8],[15,14,9],[15,14,10],[15,14,11],[15,14,12],[15,14,13],[15,14,14],[15,14,15],[15,15,7],[15,15,8],[15,15,9],[15,15,10],[15,15,11],[15,15,12],[15,15,13],[15,15,14]],
      /* 4* */[[15,15,15]]
      ];
      /* Sort all IVs by this mon's CP from lowest to highest by star rating */
      for (i=0; i<4; i++) {
        IVsByStar[i].sort(function (a, b) {
          return (((baseAtk + a[0]/1) * Math.sqrt(baseDef + a[1]/1) * Math.sqrt(baseSta + a[2]/1)) - ((baseAtk + b[0]/1) * Math.sqrt(baseDef + b[1]/1) * Math.sqrt(baseSta + b[2]/1)));
        });
      }

      /* Convert cpHpPairs set arrays to sorted arrays */
      for (var star=0; star<=4; star++) {
        /* skip empty cpHpPairs sets */
        if (cpHpPairs[star].size > 0) {
          /* Convert to sorted array (by CP then HP) to loop through */
          cpHpPairs[star] = Array.from(cpHpPairs[star]);
          cpHpPairs[star].sort(function (a, b) {
            /* Split out just CPs and compare as Ints */
            var aCP = parseInt(a.split(",")[0], 10);
            var bCP = parseInt(b.split(",")[0], 10);
            /* If CPs are the same, sort on HPs as Ints instead */
            if (aCP == bCP) {
              var aHP = parseInt(a.split(",")[1], 10);
              var bHP = parseInt(b.split(",")[1], 10);
              return aHP - bHP;
            }
            return aCP - bCP;
          });
          /* Add boolean to track if we've found this set or not */
          for (var i=0; i<cpHpPairs[star].length; i++) {
            var IVs = cpHpPairs[star][i].split(",");
            cpHpPairs[star][i] = [parseInt(IVs[0], 10), parseInt(IVs[1], 10), false];
          }
          /*console.log("");
          console.log("Searching for sorted cpHpPairs["+star+"]:"+JSON.stringify(cpHpPairs[star]));*/

          /* Calculate all possibleIVs for these cpHpPairs */
          for (var level=minSearchLvl; level<=maxSearchLvl; level++) {
            const cpmIndex = Math.round((level - 1) * 2);
            var found = false;
            for (var i=0; i<cpHpPairs[star].length && IVsByStar[star].length>0; i++) {
              const searchCP = cpHpPairs[star][i][0];
              const searchHP = cpHpPairs[star][i][1];
              /* Already sorted IVsByStar from min to max CP */
              var firstIVs = IVsByStar[star][0];
              var minCP = Math.max(10, Math.floor((baseAtk + firstIVs[0]/1) * Math.sqrt(baseDef + firstIVs[1]/1) * Math.sqrt(baseSta + firstIVs[2]/1) * cpm[cpmIndex] * cpm[cpmIndex] / 10));
              if (searchCP/1 < minCP/1 && cpHpPairs[star][i][2] == true) {
                /*console.log("Removing already found entry:"+cpHpPairs[star][i]+" as < "+minCP+"(minCP) at L"+level);*/
                /* Remove as we have passed the level where this CP can be found */
                cpHpPairs[star].splice(i,1);
                /* Reset loop to before this removed element, to keep searching at this level */
                i = Math.max(-1, i-1);
                continue;
              }
              var lastIVs = IVsByStar[star][IVsByStar[star].length-1];
              var maxCP = Math.max(10, Math.floor((baseAtk + lastIVs[0]/1) * Math.sqrt(baseDef + lastIVs[1]/1) * Math.sqrt(baseSta + lastIVs[2]/1) * cpm[cpmIndex] * cpm[cpmIndex] / 10));
              if (searchCP/1 > maxCP/1) {
                /* Skip this for now, but don't remove, it will be found later once at a higher level */
                continue;
              }
              /*console.log("Starting search for "+(cpHpPairs[star][i])+" CP+HP pair at level="+level+", minSearchLvl:"+minSearchLvl+", maxSearchLvl:"+maxSearchLvl+", minCP:"+minCP+", maxCP:"+maxCP);*/
              
              for (var j=0; j<IVsByStar[star].length; j++) {
                var atkIV = IVsByStar[star][j][0];
                var defIV = IVsByStar[star][j][1];
                var staIV = IVsByStar[star][j][2];
                const computedCP = Math.max(10, Math.floor((baseAtk + atkIV/1) * Math.sqrt(baseDef + defIV/1) * Math.sqrt(baseSta + staIV/1) * cpm[cpmIndex] * cpm[cpmIndex] / 10));
                const computedHP = Math.max(10, Math.floor((baseSta + staIV/1)*cpm[cpmIndex]));
                if ((searchCP/1 == computedCP/1) && (searchHP/1 == computedHP/1)) {
                  /* Matched CP+HP, add IVs to possibleIVs and remove from IVsByStar to speed up remaining CP+HP searches */
                  possibleIVs.add(atkIV+","+defIV+","+staIV);
                  IVsByStar[star].splice(j,1);
                  /*console.log("Found searchCP("+searchCP+")&("+searchHP+")searchHP at L"+level+", added "+atkIV+","+defIV+","+staIV+" to possibleIVs, and removed from IVsByStar["+star+"], length now:"+IVsByStar[star].length);*/
                  if (star/1 == 4 && atkIV/1 == 15 && defIV/1 == 15 && staIV/1 == 15) {
                    console.log("Clearing remaining 4* CP+HP pairs as we have already found and removed 15-15-15 from IVsByStar["+star+"]");
                    cpHpPairs[star] = {};
                  } else {
                    /* Mark this CP+HP set as found */
                    cpHpPairs[star][i][2] = true;
                  }
                }
              }
              if (level == maxSearchLvl && cpHpPairs[star][i][2] == true) {
                console.log("Removing final CP HP pair ("+cpHpPairs[star][i]+") as we've already found it");
                cpHpPairs[star].splice(i,1);
              }
            }
          }
        }
      }
      /*console.log("Finished searching, remaining cpHpPairs:");
      console.log("cpHpPairs[0]:"+JSON.stringify(cpHpPairs[0]));
      console.log("cpHpPairs[1]:"+JSON.stringify(cpHpPairs[1]));
      console.log("cpHpPairs[2]:"+JSON.stringify(cpHpPairs[2]));
      console.log("cpHpPairs[3]:"+JSON.stringify(cpHpPairs[3]));
      console.log("cpHpPairs[4]:"+JSON.stringify(cpHpPairs[4]));*/
      /* Summarize output */
      var tIvSize = targetIVs.size;
      var pIvSize = possibleIVs.size;
      var fpRate = Math.round((tIvSize/pIvSize)*1000)/10;
      /* Output all IV sets for user feedback */
      targetIVs = sortSetIVs(targetIVs);
      possibleIVs = sortSetIVs(possibleIVs);
      var missingIVs = [];
      /* Check to see if all targetIVs exist in possibleIVs */
      for (var i=0; i<targetIVs.length; i++) {
        var foundIVs = false;
        for (var j=0; j<possibleIVs.length; j++) {
          if (targetIVs[i][0]/1 == possibleIVs[j][0]/1 && targetIVs[i][1]/1 == possibleIVs[j][1]/1 && targetIVs[i][2]/1 == possibleIVs[j][2]/1) {
            foundIVs = true;
            break;
          }
        }
        /* If targetIVs were not found, add to missingIVs to alert the user */
        if (foundIVs == false) {missingIVs[missingIVs.length] = targetIVs[i];}
      }
      var message = "<br/>String has a "+fpRate+"% match success rate finding "+tIvSize+" target IVs out of "+pIvSize+" possible matched IVs. Specific IVs are below:<br/>";
      message += "<h4>Target IVs:<button id='tIVsButton' onclick='collapsible(\"tIVsCollapsible\",\"tIVsArrow\")' style='background-color:transparent; border:none; width:33px; height:33px;'><i id='tIVsArrow' class='arrow down'></i></button></h4><div id=tIVsCollapsible hidden>"+JSON.stringify(targetIVs)+"</div></p>";
      /* Handle errors with search string */
      if (fpRate/1 > 100) {console.error("Cannot have more target IVs("+tIvSize+") than possible IVs("+pIvSize+"), fpRate is over 100% ("+fpRate+"%)");}
      if (missingIVs.length > 0) {
        console.error("Could not find missingIVs: "+JSON.stringify(missingIVs)+" anywhere in possibleIVs")
        message += "<h4>Missing IVs:<button id='tIVsButton' onclick='collapsible(\"tIVsCollapsible\",\"tIVsArrow\")' style='background-color:transparent; border:none; width:33px; height:33px;'><i id='tIVsArrow' class='arrow down'></i></button></h4><div id=tIVsCollapsible hidden>"+JSON.stringify(targetIVs)+"</div></p>";
      }
      message += "<h4>Possible Matched IVs:<button id='pIVsButton' onclick='collapsible(\"pIVsCollapsible\",\"pIVsArrow\")' style='background-color:transparent; border:none; width:33px; height:33px;'><i id='pIVsArrow' class='arrow down'></i></button></h4><div id=pIVsCollapsible hidden>"+JSON.stringify(possibleIVs)+"</div></p>";
      if (fpRate/1 < 5) {
        if (document.getElementById('league').value == "All") {
          message += "<p>To improve match accuracy, consider switching from 'All Leagues' to a specific League, and/or increasing your minimum Search Level</p>";
        } else {
          message += "<p>To improve match accuracy, consider increasing your minimum Search Level</p>";
        }
      }
      document.getElementById('outputSummaryBox').innerHTML += message;

      if (perfTiming) {stopTiming(T0, "falsePositiveRate");}
      return;
    }
    
    function sortSetIVs(setIVs) {
      var T0;
      if (perfTiming) {T0 = performance.now();}
      /* Make array from set */
      arrayIVs = Array.from(setIVs);
      /* Convert each IV to Integer then add to array index */
      for (var i=0; i<arrayIVs.length; i++) {
        var values = arrayIVs[i].split(",");
        arrayIVs[i] = [parseInt(values[0], 10),parseInt(values[1], 10),parseInt(values[2], 10)];
      }
      /* Sort IV Integers by Attack, then Defense, then HP */
      arrayIVs.sort(function (a, b) {
        if (a[0]/1 == b[0]/1) {
          if (a[1]/1 == b[1]/1) {
            return (a[2]/1) - (b[2]/1);
          }
          return (a[1]/1) - (b[1]/1);
        }
        return (a[0]/1) - (b[0]/1);
      });
      if (perfTiming) {stopTiming(T0, "sortSetIVs");}
      return arrayIVs;
    }

    function outputCustomIVsStr(customIVs, baseAtk, baseDef, baseSta, finalEvoAtk, finalEvoDef, finalEvoSta, league, output, maxBattleLvl, dexNum, monName) {
      /* Given custom IVs customIVs, outputs a Search String for the user */
      var T0;
      if (perfTiming) {T0 = performance.now();}
      
      /*console.log("outputCustomIVsStr: Received customIVs: "+JSON.stringify(customIVs)+", baseAtk: "+baseAtk+", baseDef:"+baseDef+", baseSta:"+baseSta+", finalEvoAtk:"+finalEvoAtk+", finalEvoDef:"+finalEvoDef+", finalEvoSta:"+finalEvoSta+", league:"+league+", output:"+output+", maxBattleLvl:"+maxBattleLvl+", dexNum:"+dexNum+", monName:"+monName);/*
  
      output.value = ''; /* ensure old output is cleared */
      var message = "";
      if (league !== "Raid") {message = "<i>Warning: Custom IV Search Strings can have a very high false positive rate (>90%). It will find all "+monName+" you have with your Custom IVs, along with other IVs at the same CPs/HPs</i><br /><br />";}
      message += "This string finds "+monName+" with ";
      message += (document.getElementById('trash').checked) ? "IVs except: ":"IVs: ";
      message += JSON.stringify(customIVs);
      var cps = [], hps = [], aIV = [], dIV = [], sIV = [];
      var i, k, lookupLvl;
      
      cps[0] = new Set();
      hps[0] = new Set();
      aIV[0] = new Set();
      dIV[0] = new Set();
      sIV[0] = new Set();
      cps[1] = new Set();
      hps[1] = new Set();
      aIV[1] = new Set();
      dIV[1] = new Set();
      sIV[1] = new Set();
      cps[2] = new Set();
      hps[2] = new Set();
      aIV[2] = new Set();
      dIV[2] = new Set();
      sIV[2] = new Set();
      cps[3] = new Set();
      hps[3] = new Set();
      aIV[3] = new Set();
      dIV[3] = new Set();
      sIV[3] = new Set();
      cps[4] = new Set();
      hps[4] = new Set();
      aIV[4] = new Set();
      dIV[4] = new Set();
      sIV[4] = new Set();
      var maxCP = new Array(5).fill(0), maxHP = new Array(5).fill(0);
      var slMin = document.getElementById('minSearchLvl').value/1;
      var slMax = document.getElementById('maxSearchLvl').value/1;
      
      /* generate all the cps and hps for matching */
      /* for all customIV spreads, up to CP limit */
      for (i=0; i<customIVs.length; i++) {
        
        var atk = customIVs[i][0];
        var def = customIVs[i][1];
        var sta = customIVs[i][2];
        var atkBkt = -1, defBkt = -1, hpBkt = -1;
        
        for (k=slMin; k<slMax; k++) {lookupLvl = (k-1)*2;
          var cp = Math.max(10, Math.floor((baseAtk/1 + atk/1) * Math.sqrt(baseDef/1 + def/1) * Math.sqrt(baseSta/1 + sta/1) * cpm[lookupLvl] * cpm[lookupLvl] / 10));
          var finalEvoCP = Math.max(10, Math.floor((finalEvoAtk/1 + atk/1) * Math.sqrt(finalEvoDef/1 + def/1) * Math.sqrt(finalEvoSta/1 + sta/1) * cpm[lookupLvl] * cpm[lookupLvl] / 10));
          
          /* Check if this level+IVs combo is over league CP cap*/
          if (finalEvoCP/1 > league/1) {
            console.log("outputCustomIVsStr: "+customIVs[i]+" at L:"+lookupLvl+" finalEvoCP:"+finalEvoCP+" is over league limit ("+league+", finished with this IV set");
            break;
          }
          /* generate hps for more accurate search string matching */
          var hp = Math.max(10, Math.floor((baseSta/1 + sta/1) * cpm[lookupLvl]));
          
          /* generate IV buckets for more accurate search string matching */
          /* 0 is 0IV, 1 is 1-5IV, 2 is 6-10IV, 3 is 11-14IV, 4 is 15IV */
          if (atk/1==15) {atkBkt=4;} else {atkBkt=Math.ceil(atk/5);}
          if (def/1==15) {defBkt=4;} else {defBkt=Math.ceil(def/5);}
          if (sta/1==15) {hpBkt=4;} else {hpBkt=Math.ceil(sta/5);}
          
          /* bucket CPs and HPs into appraisal ratings for more accurrate matching */
          var IVsum = atk/1 + def/1 + sta/1;
    		  var Star = "NA";
          if (IVsum<23){Star="0*";}else if(IVsum<30){Star="1*";}else if (IVsum<37){Star="2*";}else if(IVsum<45){Star="3*";}else{Star="4*";}
          switch (Star) {
            case "0*":
              cps[0].add(cp);
              hps[0].add(hp);
              aIV[0].add(atkBkt);
              dIV[0].add(defBkt);
              sIV[0].add(hpBkt);
              if (maxCP[0] < cp) {maxCP[0] = cp;}
              if (maxHP[0] < hp) {maxHP[0] = hp;}
              break;
            case "1*":
              cps[1].add(cp);
              hps[1].add(hp);
              aIV[1].add(atkBkt);
              dIV[1].add(defBkt);
              sIV[1].add(hpBkt);
              if (maxCP[1] < cp) {maxCP[1] = cp;}
              if (maxHP[1] < hp) {maxHP[1] = hp;}
              break;
            case "2*":
              cps[2].add(cp);
              hps[2].add(hp);
              aIV[2].add(atkBkt);
              dIV[2].add(defBkt);
              sIV[2].add(hpBkt);
              if (maxCP[2] < cp) {maxCP[2] = cp;}
              if (maxHP[2] < hp) {maxHP[2] = hp;}
              break;
            case "3*":
              cps[3].add(cp);
              hps[3].add(hp);
              aIV[3].add(atkBkt);
              dIV[3].add(defBkt);
              sIV[3].add(hpBkt);
              if (maxCP[3] < cp) {maxCP[3] = cp;}
              if (maxHP[3] < hp) {maxHP[3] = hp;}
              break;
            case "4*":
              cps[4].add(cp);
              hps[4].add(hp);
              aIV[4].add(atkBkt);
              dIV[4].add(defBkt);
              sIV[4].add(hpBkt);
              if (maxCP[4] < cp) {maxCP[4] = cp;}
              if (maxHP[4] < hp) {maxHP[4] = hp;}
              break;
          }
        }
      }
      
      /* get actual maxCP and maxHP using spread syntax */
      if (document.getElementById('trash').checked) {
        maxCP.fill(Math.max(...maxCP));
        maxHP.fill(Math.max(...maxHP));
      }
        
      /* output the CPs and HPs */
      outputCPsHPsBuckets(cps.slice(), maxCP, hps.slice(), maxHP, aIV, dIV, sIV, output, dexNum);
      var origOut = output.value;
      
      if (origOut.length > 2000) { /* Check and split output length into <2000 char chunks at commas for iOS users */
        let excessOut = output.value.substring(0); /* ensure we don't mutilate actual output */
        let div = document.getElementById("overflowArea"); /* div where overflows are created */
        div.innerHTML = "<i style='font-size:0.6em'>&lt;2000 character strings for iOS Text Replacement compatibility:</i><br />";
        for (i=1;excessOut.length>0;i++) {
          let newOverflow = document.createElement("textarea");
          newOverflow.id = "overflow"+i; newOverflow.rows=1; newOverflow.style="width: 50%; height: 50%;"; newOverflow.setAttribute('onclick', "autocopy(this)"); div.appendChild(newOverflow);
          let cut = excessOut.slice(0, 2001).lastIndexOf(",")+1; /*correct for 0 index with + 1*/
          document.getElementById("overflow"+i).value = (excessOut.length>2000) ? excessOut.slice(0, cut) : excessOut;
          console.log("outputCustomIVsStr: TotalLen:"+origOut.length+", cut:"+cut+", excessOut.length:"+excessOut.length);
          excessOut = (excessOut.length>2000) ? excessOut.substring(cut) : 0;
        }
      }
      
      /* Fix UI to remove base mon selection and update message appropriately */
      document.getElementById('outputSummaryBox').innerHTML = "<p>"+message+"</p>";
      document.getElementById('feedbackBox').innerHTML = "";
      document.getElementById('targetDiv').style.display = (league === "Raid" || document.getElementById('customIVs').checked) ? "inline-block" : "none";
      document.getElementById('RaidlimitDiv').style.display = (league === "Raid") ? "inline-block" : "none";
      document.getElementById('RaidOverrideDiv').style.display = (league === "Raid") ? "inline-block" : "none";
      document.getElementById('asDiv').style.display = "none";
      
      if (perfTiming) {stopTiming(T0, "outputCustomIVsStr");}
      return output;
    }
    
    function groupAttr(input, lang) {
      var output;
      if (Array.isArray(input)) { /* https://stackoverflow.com/a/48657553 */
        output = new Set( input.reduce( ( a, c ) => a.concat( [...c] ), [] ) );
      } else {
        output = input;
      }
      output = Array.from(output);
      output.sort((a, b) => a - b);
      output = getRanges(output);
      if (output.length<1) {
        console.log("groupAttr: No output("+JSON.stringify(output)+"), returning empty string('')");
        return "";
      }
      
      /* Otherwise if we have something to output, keep going */
      var checkStr = output + lang;
      
      /* Can possibly return 0-1,2attack by default */
      var splitStr = checkStr.split(',');
      if (splitStr.length>1) {
        for (var i=0; i<splitStr.length; i++) {
          /* Add missing attack/defense/HP lang as needed */
          if (splitStr[i].includes(lang)) {continue;}
          else {splitStr[i] = splitStr[i] + lang;}
        }
        /* Ensure we merge the strings back together to return */
        checkStr = splitStr.join(",");
      }
      return "," + checkStr;
    }

    function printSetArray(setArray) {
      /* Debug function to print out set array objects */
      var out = "";
      /*console.log("printSetArray: Received:"+new Array(...setArray).join(' ')+", typeof:"+typeof setArray+", setArray.isArray():"+Array.isArray(setArray)+", setArray.length:"+setArray.length);*/
      var testVar = new Array(...setArray).join(' ');
      /*console.log("printSetArray: testVar:"+new Array(...testVar).join(' ')+", typeof:"+typeof testVar+", testVar.isArray():"+Array.isArray(testVar)+", testVar.length:"+testVar.length);*/
      if (testVar.length < 25) {
        /*console.log("testVar is no longer an array, returning");*/
        return testVar;
      }
      for (var i=0; i<setArray.length; i++) {
        var arrayOut = new Array(...setArray[i]).join(' ');
        out += JSON.stringify(arrayOut);
      }
      return out;
    }
    
    function outputCPsHPsBuckets(cps, maxCP, hps, maxHP, atkBkts, defBkts, staBkts, output, id) {
      var T0;
      if (perfTiming) {T0 = performance.now();}
      /*console.log("outputCPsHPsBuckets: Received cps:"+cps+", maxCP:"+maxCP+", atkBkts:"+atkBkts+", output:"+output+", id:"+id);
      console.log("outputCPsHPsBuckets: Received cps:"+printSetArray(cps));console.log("outputCPsHPsBuckets: Received maxCP:"+printSetArray(maxCP));console.log("outputCPsHPsBuckets: Received atkBkts:"+printSetArray(atkBkts));console.log("outputCPsHPsBuckets: Received output:"+JSON.stringify(output)+", id:"+id);*/
      
      var emptyBuf = "";
      var trash = document.getElementById('trash').checked;
      var lang = document.getElementById('lang').value.split(',');
      
      output.value = id; /* add dex num */
      
      /* Flip attribute appraisals if this is a trash string */
      if (trash) {
        for (i=0; i<atkBkts.length; i++) {
          atkBkts[i] = trashFlip(atkBkts[i], 4, true);
          defBkts[i] = trashFlip(defBkts[i], 4, true);
          staBkts[i] = trashFlip(staBkts[i], 4, true);
        }
      }

      /* output cps and hps */
      for (var i=0; i<4; i++) {
        /* Handle 4* case after loop */
        
        /* skip empty sets */
        if (cps[i].size > 0) {
          /* only flip CPs/HPs if non-zero */
          if (trash) {
            cps[i] = trashFlip(cps[i], maxCP[i], false);
            
            /* skip empty hps */
            if (hps[i].size > 0) {
              hps[i] = trashFlip(hps[i], maxHP[i], false);
            }
          }
          
          /* output CPs */
          cps[i] = Array.from(cps[i]);
          cps[i].sort((a, b) => a - b);
          /* Add attribute appraisals between CP/HP groupings for improved accuracy */
          output.value += '&!'+i+'*' + groupAttr(atkBkts[i], lang[LANG_ATK]);
          /* Need to intersperce &!i* between search strings, but not trash strings */
          if (!trash) {output.value += '&!'+i+'*';}
          output.value += groupAttr(defBkts[i], lang[LANG_DEF]);
          if (!trash) {output.value += '&!'+i+'*';}
          output.value += groupAttr(staBkts[i], lang[LANG_HP]);
          if (!trash) {output.value += '&!'+i+'*';}
          output.value += ',' + get_matching_string(cps[i], lang[LANG_CP]);
          
          if (!trash) {
            output.value += '&!'+i+'*';
          } else {
            output.value += ',' + lang[LANG_CP] + (maxCP[i] + 1) + "-";
          }
          
          /* skip empty hps */
          if (hps[i].size > 0) {
            hps[i] = Array.from(hps[i]);
            hps[i].sort((a, b) => a - b);
            output.value += ',' + get_matching_string(hps[i], lang[LANG_HP]);
            if (trash) {
              output.value += ',' + lang[LANG_HP] + (maxHP[i] + 1) + '-';
            }
          }
        } else if (!trash) { /* skip empty appraisal sets in search string */
          emptyBuf += '&!'+i+'*';
        }

      } /* add trash stuff */
      output.value += emptyBuf;
      
      /* Process 4* appraisals and exclusions */
      if (trash) { /* If this is a trash string */
        /* Exclude 4*, XXL, XXS, XL, XS, Tagged, 0/0/0, and Favorited mon from trash strings */
        if (document.getElementById('excludeHundo').checked) {output.value += '&!4*';}
        if (document.getElementById('excludeXXL').checked === true) {output.value += '&!XXL';}
        if (document.getElementById('excludeXXS').checked === true) {output.value += '&!XXS';}
        if (document.getElementById('excludeXL').checked === true) {output.value += '&!XL';}
        if (document.getElementById('excludeXS').checked === true) {output.value += '&!XS';}
        if (document.getElementById('excludeTags').checked === true) {output.value += '&!#';}
        /* Ensure search terms are translated if needed*/
        if (document.getElementById('excludeZero').checked) {output.value += '&1-4'+lang[LANG_ATK]+',1-4'+lang[LANG_DEF]+',1-4'+lang[LANG_HP];}
        if (document.getElementById('excludeFavs').checked) {output.value += '&!'+lang[LANG_FAV];}
      } else { /* If not a trash string */
        if (cps[4].size > 0) { /* Check if we search for hundos */
          output.value += ',4*'; /* Ensure hundos are searched for */
        }
      }
      
      /* Ensure additional regional search terms are translated as needed*/
      if (lang[LANGUAGE] !== "en") {output.value = doTranslations(output.value, lang);}
      if (perfTiming) {stopTiming(T0, "outputCPsHPsBuckets");}
      return true;
    }

    function doTranslations(string, lang) {
      var T0;
      if (perfTiming) {T0 = performance.now();}

      string = string.replace(/mega/gi,    lang[LANG_MEGA]);
      string = string.replace(/eggsonly/gi,lang[LANG_EGG]);
      /* Skip bug, not yet used for any form differentiation */
      /* string = string.replace(/bug/gi,  lang[LANG_BUG]);  */
      string = string.replace(/dark/gi,    lang[LANG_DARK]);
      string = string.replace(/dragon/gi,  lang[LANG_DRAGON]);
      string = string.replace(/electric/gi,lang[LANG_ELECTRIC]);
      string = string.replace(/fairy/gi,   lang[LANG_FAIRY]);
      string = string.replace(/fighting/gi,lang[LANG_FIGHTING]);
      string = string.replace(/fire/gi,    lang[LANG_FIRE]);
      string = string.replace(/flying/gi,  lang[LANG_FLYING]);
      string = string.replace(/ghost/gi,   lang[LANG_GHOST]);
      string = string.replace(/grass/gi,   lang[LANG_GRASS]);
      string = string.replace(/ground/gi,  lang[LANG_GROUND]);
      string = string.replace(/ice/gi,     lang[LANG_ICE]);
      string = string.replace(/normal/gi,  lang[LANG_NORMAL]);
      string = string.replace(/poison/gi,  lang[LANG_POISON]);
      string = string.replace(/psychic/gi, lang[LANG_PSYCHIC]);
      string = string.replace(/rock/gi,    lang[LANG_ROCK]);
      string = string.replace(/steel/gi,   lang[LANG_STEEL]);
      string = string.replace(/water/gi,   lang[LANG_WATER]);
      string = string.replace(/costume/gi, lang[LANG_COSTUME]);
      string = string.replace(/female/gi,  lang[LANG_FEMALE]);
      string = string.replace(/male/gi,    lang[LANG_MALE]);
      
      if (perfTiming) {stopTiming(T0, "doTranslations");}
      return string;
    }
    
    function trashFlip(cps, maxCP, attr) {
      var T0;
      if (perfTiming) {T0 = performance.now();}
      var i=10;
      if (attr) {i=0;}
      if (cps instanceof Set) {
        for (i; i<=maxCP; i++) {
          if( cps.has(i) ) {
    				cps.delete(i);
    			} else {
    				cps.add(i);
    		  }
        }
        if (perfTiming) {stopTiming(T0, "trashFlip");}
        return cps;
      } else {
        console.error("trashFlip: received cps as "+typeof cps+" instead of expected set");
        document.getElementById('errorBox').innerHTML = "ERROR: Please try again. If this persists, please send us your Search's URL via <a href='https://discord.gg/UD4Temq'>Discord!</a>";
        if (perfTiming) {stopTiming(T0, "trashFlip");}
        return false;
      }
    }
    
    function getRanges(array) { /* https://stackoverflow.com/a/54205694 */
      return array.reduce((l => (r, v, i, a) => {
        if (l[1] > v) return r;
        r.push(l[1] === v ? (r.pop(), l.join('-')) : (l = [v, v]).slice(0, 1).toString());
        l[1]++;
        return r;
      })([]), []);
    }

    
    /* Only accepts a SORTED array of numbers to output */
    function get_matching_string(a, t) {
      var T0;
      if (perfTiming) {T0 = performance.now();}
      var list = '', last = -1;
      
    	for( var i = 0; i < a.length; i++ ) {
    		if( a[i] === last + 1 ) {
    			list += '-';
    			last = a[i];
    			while( ++i < a.length ) {
    				if( a[i] != last + 1 ) break;
    				last = a[i];
    			}
    			if( a[--i] < 9999 ) {
    				list += a[i];
    			}
    		} else {
    			list += ',' + t + a[i];
    			last = a[i];
    		}
    	}
    	if (perfTiming) {stopTiming(T0, "get_matching_string");}
    	return list.substr(1);
    }
    
    function autocopy(e) {
      var T0;
      if (perfTiming) {T0 = performance.now();}
    	e.select();
    	document.execCommand('copy');
    	if (perfTiming) {stopTiming(T0, "autocopy");}
      return true;
    }

    function saveCurrentSettings() {
        var T0;
        if (perfTiming) {T0 = performance.now();}
        setUserPreference("lang,floor,maxBattleLvl,minSearchLvl,maxSearchLvl,trash,excludeHundo,excludeXXL,excludeXXS,excludeXL,excludeXS,excludeTags,excludeZero,excludeFavs,allZero,customIVs,noBadEvos,fpRate");
        if (perfTiming) {stopTiming(T0, "saveCurrentSettings");}
        main();
      }

    function checkUserPreference(settings) {
      var T0;
      if (perfTiming) {T0 = performance.now();}
      /* Ensure each setting is a full word, not characters */
      settings = settings.split(",");
      
      for (var i=0;  i<settings.length; i++) {
        if (localStorage[settings[i]] === undefined) {
          /* User has no preference for us to read yet */
          /*console.log("Could not find localStorage."+settings[i]);*/
          continue;
        }
        /* User has a stored preference for us to read */
        if (localStorage[settings[i]] === "true") {
          document.getElementById(settings[i]).checked = true;
        } else if (["lang","floor","maxBattleLvl","minSearchLvl","maxSearchLvl"].includes(settings[i])) {
          document.getElementById(settings[i]).value = localStorage[settings[i]];
        }
        console.log("Loaded user's preference for "+settings[i]+" as: "+localStorage[settings[i]]);
      }
      if (perfTiming) {stopTiming(T0, "checkUserPreference");}
    }
      
    function setUserPreference(settings) {
      var T0;
      if (perfTiming) {T0 = performance.now();}
      /* Ensure each setting is a full word, not characters */
      if (document.getElementById("save").checked) {
        settings = settings.split(",");
        for (var i=0; i<settings.length; i++) {
          /*console.log("Attempting to save settings["+i+"]:"+settings[i]);*/
          if (["lang","floor","maxBattleLvl","minSearchLvl","maxSearchLvl"].includes(settings[i])) {
            localStorage[settings[i]] = document.getElementById(settings[i]).value;
          } else {
            localStorage[settings[i]] = document.getElementById(settings[i]).checked ? "true" : "false";
          }
          console.log("Stored user's preference for "+settings[i]+" as "+localStorage[settings[i]]);
        }/*else{console.log("User does not want preferences saved");}*/
      }
      if (perfTiming) {stopTiming(T0, "setUserPreference");}
      main();
    }

    function stopTiming(startTime, functionName) {
      var endTime = performance.now();
      console.log(functionName+": Execution took "+(endTime-startTime).toFixed(1)+"ms");
      var docOut = functionName+": Execution took "+(endTime-startTime).toFixed(1)+"ms<br>";
      if (functionName === "main") {docOut = "<b>"+docOut+"</b>";}
      document.getElementById("timing_outputs").innerHTML += docOut;
    }

    </script>
    <div><p id="searchLvlLbl">Set your Search Levels (Lowest-Highest):</p>
    <label id="minSearchLvlLbl"></label><select title="What Level CPs/HPs to Search at/above?" id="minSearchLvl" oninput="main()">
      <option value="35">35 (WB, Maximum)</option>
      <option value="34">34 (Weather Boost)</option>
      <option value="33">33 (Weather Boost)</option>
      <option value="32">32 (Weather Boost)</option>
      <option value="31">31 (Weather Boost)</option>
      <option value="30">30 (Wild, Maximum)</option>
      <option value="29">29 (Wild Caught)</option>
      <option value="28">28 (Wild Caught)</option>
      <option value="27">27 (Wild Caught)</option>
      <option value="26">26 (Wild Caught)</option>
      <option value="25">25 (Wild, WB Raid)</option>
      <option value="24">24 (Wild Caught)</option>
      <option value="23">23 (Wild Caught)</option>
      <option value="22">22 (Wild Caught)</option>
      <option value="21">21 (Wild Caught)</option>
      <option value="20">20 (Wild, Raid)</option>
      <option value="19">19 (Wild Caught)</option>
      <option value="18">18 (Wild Caught)</option>
      <option value="17">17 (Wild Caught)</option>
      <option value="16">16 (Wild Caught)</option>
      <option value="15">15 (Wild, Quest)</option>
      <option value="14">14 (Wild Caught)</option>
      <option value="13">13 (Wild Caught)</option>
      <option value="12">12 (Wild Caught)</option>
      <option value="11">11 (Wild Caught)</option>
      <option value="10">10 (Wild Caught)</option>
      <option value="9">9 (Wild Caught)</option>
      <option value="8">8 (Wild Caught)</option>
      <option value="7">7 (Wild Caught)</option>
      <option value="6">6 (Wild Caught)</option>
      <option value="5">5 (Wild Caught)</option>
      <option value="4">4 (Wild Caught)</option>
      <option value="3">3 (Wild Caught)</option>
      <option value="2">2 (Wild Caught)</option>
      <option value="1" selected>1 (Wild, Minimum)</option>
    </select>
    <label id="maxSearchLvlLbl">to </label><select title="What Level CPs/HPs to Search at/below?" id="maxSearchLvl" oninput="main()">
      <option value="35">35 (WB, Maximum)</option>
      <option value="34">34 (Weather Boost)</option>
      <option value="33">33 (Weather Boost)</option>
      <option value="32">32 (Weather Boost)</option>
      <option value="31">31 (Weather Boost)</option>
      <option value="30" selected>30 (Wild, Maximum)</option>
      <option value="29">29 (Wild Caught)</option>
      <option value="28">28 (Wild Caught)</option>
      <option value="27">27 (Wild Caught)</option>
      <option value="26">26 (Wild Caught)</option>
      <option value="25">25 (Wild, WB Raid)</option>
      <option value="24">24 (Wild Caught)</option>
      <option value="23">23 (Wild Caught)</option>
      <option value="22">22 (Wild Caught)</option>
      <option value="21">21 (Wild Caught)</option>
      <option value="20">20 (Wild, Raid)</option>
      <option value="19">19 (Wild Caught)</option>
      <option value="18">18 (Wild Caught)</option>
      <option value="17">17 (Wild Caught)</option>
      <option value="16">16 (Wild Caught)</option>
      <option value="15">15 (Wild, Quest)</option>
      <option value="14">14 (Wild Caught)</option>
      <option value="13">13 (Wild Caught)</option>
      <option value="12">12 (Wild Caught)</option>
      <option value="11">11 (Wild Caught)</option>
      <option value="10">10 (Wild Caught)</option>
      <option value="9">9 (Wild Caught)</option>
      <option value="8">8 (Wild Caught)</option>
      <option value="7">7 (Wild Caught)</option>
      <option value="6">6 (Wild Caught)</option>
      <option value="5">5 (Wild Caught)</option>
      <option value="4">4 (Wild Caught)</option>
      <option value="3">3 (Wild Caught)</option>
      <option value="2">2 (Wild Caught)</option>
      <option value="1">1 (Wild, Minimum)</option>
    </select></div><br/>
    <label>Language:<select id="lang" oninput="main()">
      <!--Translated with help from https://leidwesen.github.io/PhraseTranslator/-->
      <option value="pt-br,pc,ps,ataque,defesa,favorito,mega,apenasovos,inseto,sombrio,dragão,elétrico,fada,lutador,fogo,voador,fantasma,planta,terrestre,gelo,normal,venenoso,psíquico,pedra,aço,água,traje,fêmea,macho">Brazilian Portuguese</option>
      <option value="zh,cp,hp,攻擊,防禦,我的最愛,超級,只限蛋,蟲,惡,龍,電,妖精,格鬥,火,飛行,幽靈,草,地面,冰,一般,毒,超能力,岩石,鋼,水,特殊,雌性,雄性">Chinese Traditional</option>
      <option selected value="en,cp,hp,attack,defense,favorite,mega,eggsonly,bug,dark,dragon,electric,fairy,fighting,fire,flying,ghost,grass,ground,ice,normal,poison,psychic,rock,steel,water,costume,female,male">English</option>
      <option value="fr,pc,pv,attaque,défense,favoris,méga,oeufseulement,insecte,ténèbres,dragon,électrik,fée,combat,feu,vol,spectre,plante,sol,glace,normal,poison,psy,roche,acier,eau,costume,femelle,mâle">French</option>
  		<option value="de,wp,kp,angriffs-wert,verteidigungs-wert,favorit,mega,nurauseiern,käfer,unlicht,drache,elektro,fee,kampf,feuer,flug,geist,pflanze,boden,eis,normal,gift,psycho,gestein,stahl,wasser,kostümiert,weiblich,männlich">German</option>
      <option value="hi,cp,hp,अटैक,डफ़ेंस,पसंदीदा,मेगा,सफ़ अंडे,बग,डाक,डैगन,इलटक,फ़ेर,फ़ाइटंग,फ़ायर,़लाइंग,घोट,ास,ाउंड,आइस,नॉमल,पॉइज़न,साइकक,रॉक,टल,वॉटर,कॉट्यूम,फ़ीमेल,मेल">Hindi</option>
      <option value="id,cp,hp,serangan,pertahanan,favorit,mega,khusustelur,serangga,kegelapan,naga,listrik,peri,petarung,api,terbang,hantu,daun,tanah,es,normal,racun,psychic,bebatuan,logam,air,kostum,betina,jantan">Indonesian</option>
      <option value="it,pl,punti salute,attacco,difesa,preferiti,mega,solouovo,coleottero,buio,drago,elettro,folletto,lotta,fuoco,volante,spettro,erba,terra,ghiaccio,normale,veleno,psico,roccia,acciaio,acqua,costume,femmina,maschio">Italian</option>
      <option value="ja,cp,hp,こうげき,ぼうぎょ,お気に入り,メガ,たまごのみ,むし,あく,ドラゴン,でんき,フェアリー,かくとう,ほのお,ひこう,ゴースト,くさ,じめん,こおり,ノーマル,どく,エスパー,いわ,はがね,みず,とくべつ,めす,おす">Japanese</option>
      <option value="ko,cp,hp,공격,방어,즐겨찾기,메가,알,벌레,악,드래곤,전기,페어리,격투,불꽃,비행,고스트,풀,땅,얼음,노말,독,에스퍼,바위,강철,물,특별,암컷,수컷">Korean</option>
      <option value="ru,БС,ож,атака,защита,избранные,мега,толькояйца,насекомое,темнота,дракон,электро,фея,сражение,огонь,летающий,привидение,трава,земля,лёд,обычный,яд,психо,камень,сталь,вода,костюмы,женские,мужские">Russian</option>
  		<option value="es,pc,puntos de salud,ataque,defensa,favoritos,mega,huevosolo,bicho,siniestro,dragón,eléctrico,hada,lucha,fuego,volador,fantasma,planta,tierra,hielo,normal,veneno,psíquico,roca,acero,agua,disfraz,hembra,macho">Spanish</option>
      <option value="th,cp,hp,โจมตี,ปองกัน,รายการโปรด,เมกา,รางเบบี้,แมลง,ความมืด,มังกร,ไฟฟา,แฟรี่,ตอสู,ไฟ,บิน,ผี,หญา,ดิน,น้ำแข็ง,ปกติ,พิษ,พลังจิต,หิน,โลหะ,น้ำ,เครื่องแตงกาย,ตัวเมีย,ตัวผู">Thai</option>
      <option value="tr,dg,sp,sald&#305;r&#305;,savunma,favori,mega,sadeceyumurta,böcek,karanl&#305;k,ejderha,elektrik,peri,dövüşçü,ateş,uçan,hayalet,bitki,yer,buz,normal,zehir,psişik,kaya,çelik,su,kostüm,dişi,erkek">Turkish</option>
    </select>
    </label><br />
    <label><input id="fpRate" type="checkbox" oninput="main()" checked>Show False Positive Rate</label><br />
    <label><input id="trash" type="checkbox" oninput="main()">Trash String</label><br />
    <div id="trashAdv" style="display: none;"><br /><b>Exclude from Trash String:</b><br />
      <label>IVs:&nbsp;&nbsp;<input id="excludeHundo" type="checkbox" checked oninput="main()"> 15-15-15</label>&nbsp;&nbsp;&nbsp;<label><input id="excludeZero" type="checkbox" checked oninput="main()"> 0-0-0</label><br />
      <label><input id="excludeXXL" type="checkbox" oninput="main()"> XXL</label>&nbsp;&nbsp;<label><input id="excludeXXS" type="checkbox" oninput="main()"> XXS</label>&nbsp;&nbsp;<label><input id="excludeXL" type="checkbox" oninput="main()"> XL</label>&nbsp;&nbsp;<label><input id="excludeXS" type="checkbox" oninput="main()"> XS</label><br />
      <label><input id="excludeTags" type="checkbox" oninput="main()"> Tagged</label>&nbsp;&nbsp;&nbsp;<label><input id="excludeFavs" type="checkbox" oninput="main()"> Favorites</label><br />
    </div><br />
    <h3>Advanced:<button id="advButton" onclick="collapsible('advCollapsible','advArrow')" style="background-color:transparent; border:none; width:33px; height:33px;"><i id="advArrow" class="arrow down"></i></button></h3>
    <div id=advCollapsible hidden>
    <label><input id="customIVs" type="checkbox" oninput="main()">Custom IV Search</label><br />
    <div id="IVentryDiv"> <label id="IVentryLbl" for="IVentry"  style="display: none;">Custom IVs:</label><input id="IVentry" oninput="main()" value="11/12/13,4-5-6 1+2+3" style="display: none;"></div>
    <label>IV Floor:<select id="floor" oninput="main()">
        <option value="0">0: Wild Caught</option>
        <option value="1">1: Trade, Good Friend</option>
        <option value="2">2: Trade, Great / Purified</option>
        <option value="3">3: Trade, Ultra Friend</option>
        <option value="4">4: Weather Boost</option>
        <option value="5">5: Trade, Best Friend</option>
        <option value="6">6: Shadow Legendary</option>
        <option value="10">10: Raid / Hatch</option>
        <option value="12">12: Lucky Trade</option>
      </select></label><br />
    <div><label id="maxBattleLvlLbl">Max PvP Level:</label><select title="What Level Ceiling to Search?" id="maxBattleLvl" oninput="main()">
        <option value="1">1: Wild Caught</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15: Research Reward</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20: Raid Reward</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25: Purified</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>
        <option value="32">32</option>
        <option value="33">33</option>
        <option value="34">34</option>
        <option value="35">35</option>
        <option value="36">36</option>
        <option value="37">37</option>
        <option value="38">38</option>
        <option value="39">39</option>
        <option value="40">40</option>
        <option value="41">41</option>
        <option value="42">42</option>
        <option value="43">43</option>
        <option value="44">44</option>
        <option value="45">45</option>
        <option value="46">46</option>
        <option value="47">47</option>
        <option value="48">48</option>
        <option value="49">49</option>
        <option value="50">50</option>
        <option selected value="51">51: Best Buddy</option>
        <option value="52">52 (SPECULATIVE)</option>
        <option value="53">53 (SPECULATIVE)</option>
        <option value="54">54 (SPECULATIVE)</option>
        <option value="55">55 (SPECULATIVE)</option>
      </select></div>
      <label><input id="allZero" type="checkbox" oninput="main()">Find ALL 0% mon</label><br />
      <label><input id="noBadEvos" type="checkbox" oninput="main()" checked>Remove Impossible Evolutions</label><br /><br />
      <label><input id="save" type="checkbox" oninput="saveCurrentSettings()">Remember My Settings</label><br />
      <button id="resetButton" type="resetSettings" onclick="localStorage.clear();location.reload();">Reset All Saved Settings to Defaults</button>
    </div>
      <br /><div id=overflowArea></div>
      <br />
      <div style="overflow-x:auto;">
        <p style="color: var(--tableHeaderText);font-size:0.8em">© 2023 PvP IVs | <a href="https://pvpivs.com/privacy">Privacy Policy</a> | <a href="https://pvpivs.com/contact">Contact Us</a></p>
        <p style="color: var(--tableHeaderText);font-size:0.6em">Pokémon and Pokémon GO are copyright of The Pokémon Company, Niantic, Inc., and Nintendo.<br/>All trademarked images and names are property of their respective owners, and any such material is used on this site for educational purposes only.<br/>PvP IVs has no affiliation with The Pokémon Company, Niantic, Inc., or Nintendo.</p>
      </div>
      <p style="overflow-x:auto;" id="timing_outputs"></p>
      <br /><br /><br /><br />
    </section>
  </body>
</html>